<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Scala/String.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
<head>







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">







  
  
  
  
  
  
  
  <title>String</title></head>
<body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Scala Gossip: String</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>在Scala中，重用了Java的字串類別java.lang.String，所以基本上，Scala中字串與Java中的字串有著相同的特性（可以參考 &nbsp;</small><a href="../JavaEssence/String.html"><small>那些字串二三事</small></a><small>）。你可以在Scala中直接用雙引號宣告字串，或者是使用字元陣列來建構字串，例如：<br></small><pre>val str1 = "Scala"<br>val str2 = new String(Array('S', 'c', 'a', 'l', 'a'))<br>println(str1) // 顯示 Scala<br>println(str2) // 顯示 Scala</pre><br><small>字串是不可變動的（Immutable），在建立之後就不能改變它的值，在內部字串是使用陣列儲存字元資料，你可以根據索引取得字串中的字元值，</small><small>基本上你可以使用charAt方法，</small><small>索引由0開始，例如str1.charAt(0)傳回'S'字元，str1.charAt(1)傳回'c字元，'，</small><small>以下是幾個與索引相關的方法（直接引自java.lang.String的方法宣告方式）：</small><br>




      
      <table align="left" border="1" width="100%">




  <tbody>




    <tr>




      <td align="left" valign="top"><small>char charAt(int index) </small></td>




      <td align="left" valign="top"><small>傳回指定索引處的字元 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>int indexOf(int ch) </small></td>




      <td align="left" valign="top"><small>傳回指定字元第一個找到的索引位置 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>int indexOf(String str) </small></td>




      <td align="left" valign="top"><small>傳回指定字串第一個找到的索引位置 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>int lastIndexOf(int ch) </small></td>




      <td align="left" valign="top"><small>傳回指定字元最後一個找到的索引位置 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>String substring(int beginIndex) </small></td>




      <td align="left" valign="top"><small>取出指定索引處至字串尾端的子字串 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>String substring(int beginIndex,
int endIndex) </small></td>




      <td align="left" valign="top"><small>取出指定索引範圍子字串 </small></td>




    </tr>




    <tr>




      <td align="left" valign="top"><small>char[] toCharArray() </small></td>




      <td align="left" valign="top"><small>將字串轉換為字元陣列 </small></td></tr></tbody></table><br><small><br>要取得字串長度資訊，也是透過String類別的length方法來取得，簡單來說，只要查詢 <a href="http://java.sun.com/javase/6/docs/api/java/lang/String.html">java.lang.String</a> 的API，就可以知道在Scala中，字串有哪些方法可以操作。<br><br>除
了使用Java的方式來操作字串之外，在Scala中，你還可以對字串作更多的操作，例如，有剖析字串，可以使用toInt、toLong、
toDouble等方法（在Java中則是使用對應Wrapper類別的parseXXX()方法），也可以將某個字串「乘以」某數，表示重複字串幾次：<br></small><pre>println("123".toInt + "456".toInt) // 顯示 579<br>println("Scala" * 3) // 顯示 ScalaScalaScala</pre><small><br>若要循序取出字串中每個字元，可以使用<big> </big></small><small><big><a href="ForExpression.html"><small>for 運算式</small></a></big>：<br></small><pre>for(c &lt;- "Scala") {<br>    println(c) // 每行顯示一個字元<br>}</pre><small><br></small><small><big><a href="Function.html"><small>簡單的函式</small></a></big> </small><small>曾介紹過的foreach方法，在字串上也可以使用：<br></small><pre>"Scala".foreach((c: Char) =&gt; println(c)) // 每行顯示一個字元</pre><small><br>事實上，如果你要指定索引，取得字串中的字元，除了charAt方法之外，使用以下的方式會更為直覺：<br></small><pre>val str = "Scala"<br>println(str(0)) // 顯示 'S' <br>println(str(1)) // 顯示 'c' <br>println(str(2)) // 顯示 'a' <br>println(str(3)) // 顯示 'l' <br>println(str(4)) // 顯示 'a' </pre><small><br>這並不是什麼神奇的功能，事實上當你操作字串時，呼叫了某個java.lang.String上所沒有提供的方法時，Scala會使用隱式轉換（Implicit conversion）將字串使用 <a href="http://www.scala-lang.org/docu/files/api/scala/runtime/RichString.html">scala.runtime.RichString</a> 包裹起來，上面幾個例子，實際上都是操作RichString上的某些方法才得以完成（其中一些關於產生器、foreach、apply方法等，之後還會詳述）。<br><br>在字串中若要表示特定字元，例如"號，則要使用\來跳脫（Escape），例如：<br></small><pre>val str = "This is \"Scala\"!"<br>println(str) // 顯示 This is "Scala" !</pre><small><br>以下是跳脫字元的指定方式：<br></small><table align="left" border="1" width="100%">




        <tbody>




          <tr>




            <td align="left" valign="top"><small>\\
            </small></td>




            <td align="left" valign="top"><small>反斜線
            </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\'
            </small></td>




            <td align="left" valign="top"><small>單引號
' </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\"
            </small></td>




            <td align="left" valign="top"><small>雙引號
" </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\uxxxx
            </small></td>




            <td align="left" valign="top"><small>以16
進位數指定Unicode字元輸出 </small></td>




          </tr>




          




          <tr>




            <td align="left" valign="top"><small>\b
            </small></td>




            <td align="left" valign="top"><small>倒退一
個字元 </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\f
            </small></td>




            <td align="left" valign="top"><small>換頁
            </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\n
            </small></td>




            <td align="left" valign="top"><small>換行
            </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\r
            </small></td>




            <td align="left" valign="top"><small>游標移
至行首 </small></td>




          </tr>




          <tr>




            <td align="left" valign="top"><small>\t
            </small></td>




            <td align="left" valign="top"><small>跳格
(一個Tab鍵) </small></td></tr></tbody></table><br><small><br><span style="font-weight: bold;">在Scala中，可以使用"""來括住字串，稱之為原始字串（Raw string）</span>，上面的例子可以寫為以下形式：<br></small><pre>val str = """This is "Scala"!"""<br>println(str) // 顯示 This is "Scala" !</pre><small><br>在原始字串中，你不用跳脫字元，所以可以直接在原始字串中寫下"、\符號，不用特別跳脫"、\符號，對於撰寫正則表示式（Regular expression）時的簡潔很有幫助，例如原先撰寫以下的正則表示式：<br></small><pre>val re = "\\d\\d\\d"<br>println("123-134".replaceAll(re, "###")) // 顯示 ###-###</pre><small><br>因為正則表示式\d要寫在字串中，必須跳脫\符號，所以必須寫成\\d。如果使用Scala的原始字串，則只要寫成：</small><small><br></small><pre>val re = """\d\d\d"""<br>println("123-134".replaceAll(re, "###")) // 顯示 ###-###</pre><small><br>原始字串也可以跨越多行：<br></small><pre>val text = """在原始字串中，你不用跳脫字元，<br>              所以可以直接在原始字串中寫下"<br>              、\符號，不用特別跳脫"、\符號..."""<br>println(text)</pre><small><br>上面的程式看似只是縮排，不過要注意，在跨越多行時，空白也會被列為字串的一部份，所以程式執行後會顯示：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">在原始字串中，你不用跳脫字元，<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 所以可以直接在原始字串中寫下"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 、\符號，不用特別跳脫"、\符號...</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody></table><br><small>如果不想連同空白也被列入，則可以使用 | 符號加上stripMargin方法，例如：<br></small><pre>val text = """在原始字串中，你不用跳脫字元，<br>              |所以可以直接在原始字串中寫下"<br>              |、\符號，不用特別跳脫"、\符號...""".stripMargin<br>println(text)</pre><small><br></small><small>程式執行後會顯示：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">在原始字串中，你不用跳脫字元，<br>所以可以直接在原始字串中寫下"<br>、\符號，不用特別跳脫"、\符號...</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody></table><br><small>如果你熟悉Java，對於字串的特性應該知道，直接在""中寫下字串，只要字元內容相同，無論出現幾次，在JVM中只會有一個字串實例，而==是用於比較兩個物件參考是否相同，所以下面這個Java程式結果是熟悉Java的程式設計人員都知道的事：<br></small><div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">String str1 = "Java";<br>String str2 = "Java"<br style="font-family: Courier New,Courier,monospace; font-weight: bold;"></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">String str3 = new String(str1);</small><br><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">System.out.println(str1 == str2); // 顯示 true<br></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">System.out.println(str1 == str3); // 顯示 false<br></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">System.out.println(str1.equals(str3)); // 顯示 true</small><br></div><small style="font-family: Courier New,Courier,monospace; font-weight: bold;"><br></small><small style="font-family: Times New Roman,Times,serif;">先前說過，在Scala中重用了java.lang.String，也許你會認為以下的程式也會顯示true、false、true，不過結果可能會令你訝異：<br></small><pre>val str1 = "Scala"<br>val str2 = "Scala"<br>val str3 = new String(str1)<br>println(str1 == str2)       // 顯示 true<br>println(str1 == str3)       // 顯示 true<br>println(str1.equals(str3))  // 顯示 true</pre><br><small>這
是因為==在Scala中，是比較物件實質內容是否相同，這點與Java並不同，也因此第二個顯示會是true，在Scala中基本上也沒有必要直接呼叫
equals方法，而可以直接使用==取代（之後會介紹，在Scala中，若要定義物件實質相等性，也是重新定義equals()方法，因為==會呼叫
equals()方法）。<br><br>如果你真的要比較兩個物件參考是否相同，可以使用eq或ne方法，例如：<br></small><pre>val str1 = "Scala"<br>val str2 = "Scala"<br>val str3 = new String(str1)<br>println(str1 eq str2)         // 顯示 true<br>println(str1 eq str3)         // 顯示 false<br>println(str1 == str3)         // 顯示 true</pre><br><br><br><small><br><br></small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Scala/String.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
</html>