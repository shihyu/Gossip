<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Scala/Array.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
<head>







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">







  
  
  
  
  
  
  
  <title>Array</title></head>
<body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Scala Gossip: Array</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>在Scala中，如果要建立陣列，可以使用Array類別，建立陣列時，必須指定陣列後所存放的元素型態。例如以下建立長度為5，內含Int、Double、Boolean、String等指定型態的陣列：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; val arr1 = new Array[Int](5)<br>arr1: Array[Int] = Array(0, 0, 0, 0, 0)<br><br>scala&gt; val arr2 = new Array[Double](5)<br>arr2: Array[Double] = Array(0.0, 0.0, 0.0, 0.0, 0.0)<br><br>scala&gt; val arr3 = new Array[Char](5)<br>arr3: Array[Char] = Array( , &nbsp;, &nbsp;, &nbsp;, &nbsp;)<br><br>scala&gt; val arr4 = new Array[Boolean](5)<br>arr4: Array[Boolean] = Array(false, false, false, false, false)<br><br>scala&gt; val arr5 = new Array[String](5)<br>arr5: Array[String] = Array(null, null, null, null, null)<br><br>scala&gt;&nbsp;<br></span></small><span style="color: rgb(255, 255, 255);">




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<br><small>在建立陣列之後，如果內含元素是整數，則預設值為0，浮點數則預設值為0.0，字元則預設值為空字元（字元編碼為0的字元），布林值預設為false，其它型態則預設值為null（與Java的陣列類似）。<br><br>如果要多維陣列，基本上是以一維陣列來摸擬，例如要建立二維陣列：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; val arr = new Array[Array[Int]](5, 5)<br>arr:
Array[Array[Int]] = Array(Array(0, 0, 0, 0, 0), Array(0, 0, 0, 0, 0),
Array(0, 0, 0, 0, 0), Array(0, 0, 0, 0, 0), Array(0, 0, 0, 0, 0))<br><br>scala&gt;<br></span></small><span style="color: rgb(255, 255, 255);">




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>
<br><small>如果要存取陣列，必須指定陣列索引，與其它語言存取陣列慣例不同的是，在Scala中，指定陣列索引時是使用()而非[]，例如：<br></small><pre>val arr = new Array[Int](3)<br>arr(0) = 10<br>arr(1) = 20<br>arr(2) = 30<br>println(arr(0)) // 顯示 10<br>println(arr(1)) // 顯示 20<br>println(arr(2)) // 顯示 30</pre><small><br>事實上，當你使用arr(0) = 10這樣的指定方式時，Scala會將之轉換為呼叫陣列的<span style="font-weight: bold;">update()</span>方法，而你用arr(0)的方式要取得指定索引的元素時，Scala會將之轉換為呼叫<span style="font-weight: bold;">apply</span>方法。以下是個簡單的驗證方式：<br></small><pre>val arr = new Array[Int](3)<br>arr.update(0, 10)<br>arr.update(1, 20)<br>arr.update(2, 30)<br>println(arr.apply(0)) // 顯示 10<br>println(arr.apply(1)) // 顯示 20<br>println(arr.apply(2)) // 顯示 30</pre><small><br><span style="font-weight: bold;">在Scala中，指定索引進行存取時使用()而不是[]，其實是為了語法的一致性。</span>這種在()中指定索引進行存取的方式，並非只有陣列專屬，只要是有提供update()或apply()方法的物件，其實都可以使用這樣的存取方式，像是在<big> </big></small><small><big><a href="String.html"><small>String</small></a> </big>也曾經使用過這樣的方式：</small><small><br></small><pre>val str = "Scala"<br>println(str(0)) // 顯示 'S' <br>println(str(1)) // 顯示 'c' <br>println(str(2)) // 顯示 'a' <br>println(str(3)) // 顯示 'l' <br>println(str(4)) // 顯示 'a' </pre><small><br></small><small>如果你要在建立陣列時，一併指定元素值，則可以直接使用以下的語法：<br></small><pre>val arr = Array(10, 20, 30)<br>for(i &lt;- 0 until arr.length) {<br>    println(arr(i))<br>}</pre><small><br>其實在 </small><small><big><a href="SingletonObject.html"><small>單例物件</small></a></big> 中有介紹過了，Array(10, 20, 30)這樣的寫法是個語法蜜糖，Scala會將之轉換為呼叫 <a href="https://www.scala-lang.org/docu/files/api/scala/Array$object.html">scala.Array</a> 伴侶物件的apply方法，這個方法會傳回含指定元素的陣列。以下這個程式可以驗證這個說法：<br></small><pre>val arr = Array.apply(10, 20, 30)<br>for(i &lt;- arr) {<br>    println(i)<br>}</pre><small><br>上面這個範例程式，同時示範了迭代陣列的另一種方式，每一次迭代，都會將arr的元素取出指定給i。事實上，陣列提供foreach方法可以使用，上面的程式你可以這麼撰寫：<br></small><pre>val arr = Array(10, 20, 30)<br>arr.foreach((i: Int) =&gt; println(i))</pre><small><br>在<big> </big></small><small><big><a href="Function.html"><small>簡單的函式</small></a> </big>中有介紹過，foreach中是函式字面寫法，執行時期會傳入函式物件，每次取出一個元素，就會呼叫函式物件。你可以利用類型推斷，讓這個範例更簡短一些：<br></small><pre>val arr = Array(10, 20, 30)<br>arr.foreach(i =&gt; println(i))</pre><small><br>arr.foreach(i =&gt; println(i))其實是arr.foreach((i) =&gt; println(i))簡寫，因為只有一個參數，所以括號可以省略。事實上，就上面這個例子來說，最簡短的寫法是：<br></small><pre>val arr = Array(10, 20, 30)<br>arr.foreach(println)</pre><small><br></small><small>事實上，foreach中是</small><small><span style="font-weight: bold;"> <a href="PartiallyAppliedFunction.html">部份套用函式（Partially applied function）</a></span>的寫法，這之後還會詳述。<br><br>像foreach這種傳入函式物件執行某個操作的作法，在Scala相當常見。例如陣列的filter方法，可以傳入一個會運算出布林值的函式物件，根據真或假決定結果要包括哪些元素，例如：<br></small><pre>val arr = Array(10, 20, 30, 40, 50, 60)<br>arr.filter(x =&gt; x &gt; 30).foreach(println)</pre><small><br>事實上，上面這個程式可以使用<span style="font-weight: bold;">佔位字元語法（Placeholder syntax）</span>撰寫為以下的方式：<br></small><pre>val arr = Array(10, 20, 30, 40, 50, 60)<br>arr.filter(_ &gt; 30).foreach(println) // 逐行顯示 40、50、60</pre><small><br>_
作為佔位字元，就目前來說，你可以將看它看作是填充欄位，每一次取得的元素值將值入這個欄位（其實完整的語法應該是(_ : Int) &gt;
30，不過由於利用了類型推斷，所以可以推斷出_應該是Int，因此可以寫為_ &gt; 30，佔位字元語言之後還會詳述）。<br><br>類似地，如果你不僅是想過濾，還想對元素作某些運算後傳回的話，則可以使用map方法，例如將每個元素加1後傳回新陣列：<br></small><pre>val arr = Array(10, 20, 30)<br>arr.map(_ + 1).foreach(println) // 逐行顯示 11、21、31</pre><small><br>上例中直接使用了佔位字元語法，如果要寫的詳細的話，其實是要寫為：<br></small><pre>val arr = Array(10, 20, 30)<br>arr.map(x =&gt; x + 1).foreach(println) // 逐行顯示 11、21、31</pre><small><br>陣列可以串接，不過不是使用+，而是使用++（這是Array上定義的方法），這會將兩個陣列的元素取出，建立一個新陣列後傳回。例如：<br></small><pre>val arr1 = Array(10, 20, 30)<br>val arr2 = Array(40, 50, 60)<br>(arr1 ++ arr2).foreach(println) // 逐行顯示 10、20、30、40、50、60</pre><small><br>如果你要比較兩個陣列的內含值是否相同，由於要逐一比對陣列中每個陣列的元素物件內含值，所以不能直接使用==比較，而要使用deepEquals方法。例如：<br></small><pre>val arr1 = Array(10, 20, 30)<br>val arr2 = Array(10, 20, 30)<br>println(arr1 == arr2)          // 顯示 false<br>println(arr1 deepEquals arr2)  // 顯示 true</pre><small><br></small><br><small><br><br><br></small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Scala/Array.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
</html>