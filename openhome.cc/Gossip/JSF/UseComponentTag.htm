<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/JSF/UseComponentTag.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:18:21 GMT -->
<head>






  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">






  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">






  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">






  
  
  
  
  
  
  <title>使用自訂元件</title>
</head>


<body>






<h3><a href="../index.html">From
Gossip@Openhome</a></h3>






<h1><a href="index-2.html">JSF Gossip:&nbsp;使用自訂元件 </a></h1>


<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">


  <tbody>


    <tr>


      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>




      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>




      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>




      <br>



      
      
      
      <center>
      
      
      
       <br>




      </center>




 </td>


      <td style="vertical-align: top; width: 690px; text-align: left;">
      <small>




在Component與Tag自訂完成後，這邊來看看如何使用它們，首先定義faces-config.xml：</small><br>






      
      <ul>

        <li>faces-config.xml</li>

      
      </ul>










      
      <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;!DOCTYPE faces-config PUBLIC "-//Sun Microsystems, <br>  Inc.//DTD JavaServer Faces Config 1.0//EN"<br> "http://java.sun.com/dtd/web-facesconfig_1_0.dtd"&gt;<br><br>&lt;faces-config&gt;<br>    &lt;component&gt;<br>        &lt;component-type&gt;<br>            onlyfun.caterpillar.TextWithCmd<br>        &lt;/component-type&gt;<br>        &lt;component-class&gt;<br>            onlyfun.caterpillar.UITextWithCmd<br>        &lt;/component-class&gt;<br>    &lt;/component&gt;<br>    &lt;managed-bean&gt;<br>        &lt;managed-bean-name&gt;someBean&lt;/managed-bean-name&gt;<br>        &lt;managed-bean-class&gt;<br>            onlyfun.caterpillar.SomeBean<br>        &lt;/managed-bean-class&gt;<br>        &lt;managed-bean-scope&gt;session&lt;/managed-bean-scope&gt;<br>    &lt;/managed-bean&gt;<br>&lt;/faces-config&gt;</pre>






      <br>

      <small>
&lt;component&gt;中定義Component的型態與實際的類別對應，在您於自訂Tag中呼叫
getComponentType()方法所返回的值，就是尋找&lt;component-type&gt;設定的值對應，並由此得知真正對應的
Component類別。<br>

      <br>


我們所撰寫的SomeBean測試類別如下：</small>
      <br>


      
      <ul>

        <li>SomeBean.java</li>

      
      </ul>


      
      <pre>package onlyfun.caterpillar;<br><br>public class SomeBean {<br>&nbsp;&nbsp;&nbsp; private String data;<br><br>&nbsp;&nbsp;&nbsp; public String getData() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return data;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public void setData(String data) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.data = data;<br>&nbsp;&nbsp;&nbsp; }<br>}</pre>


      <br>

      <small>
這邊寫一個簡單的網頁來測試一下我們撰寫的自訂元件：</small><br>


      
      <ul>

        <li>index.jsp</li>

      
      </ul>


      
      <pre>&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;<br>&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;<br>&lt;%@ taglib uri="/WEB-INF/textcmd.tld" prefix="oc" %&gt;<br>&lt;html&gt;<br>&lt;link href="styles.css" rel="stylesheet" type="text/css"/&gt;<br>&lt;head&gt;<br>&lt;title&gt;&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;f:view&gt;<br>     &lt;h:form&gt;<br>     Input data: &lt;oc:textcmd size="10" <br>                             value="#{someBean.data}"/&gt;<br>     &lt;/h:form&gt;<br>     &lt;h:outputText value="#{someBean.data}"/&gt;<br>&lt;/f:view&gt;<br>&lt;/body&gt;	<br>&lt;/html&gt;</pre>


      <br>


      <br>

      </td>


    </tr>


  
  </tbody>
</table>


<br>

<br>






<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/JSF/UseComponentTag.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:18:21 GMT -->
</html>
