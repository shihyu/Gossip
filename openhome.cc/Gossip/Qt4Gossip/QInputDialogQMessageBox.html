<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/Qt4Gossip/QInputDialogQMessageBox.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:09:56 GMT -->
<head>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">














  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>QInputDialog 與 QMessageBox</title>
</head>


<body>















<h3><a href="../index.html">From
Gossip@Openhome</a></h3>















<h1><a href="index-2.html">Qt4 Gossip: QInputDialog 與 QMessageBox</a></h1>















<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">















  <tbody>















    <tr>















      <td style="width: 676px; vertical-align: top;"> <small>在程式中常出現一些簡單的對話或訊息方塊，在這邊介紹的QInputDialog與QMessageBox算是最常見的類型，它們的使用非常簡單，首先看個簡單的程式碼片段：<br>





      </small>
      
      
      
      
      
      <div style="margin-left: 40px;"><small>&nbsp;<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">bool isOK;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">QString text = QInputDialog::getText(parent, "Input Dialog",</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Please input your comment", <br>





&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QLineEdit::Normal, "your comment", &amp;isOK);</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(isOK) {</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &nbsp; QMessageBox::information(parent, "Information",</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Your comment is: &lt;b&gt;" + text + "&lt;/b&gt;",</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes);</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</small><br>





      </div>














      <span class="postbody"><br>





      <small>在這個程式片中，QInputDialog使用getText()方法來取得使用者輸入字串，然後使用QMessageBox
來顯示輸入的字串；QInputDialog若取得輸入，會把isOK中設定為true，由此可判斷使用者是否有輸入，QMessageBox可以使用一
些基本的html語法來設定文字的顯示，訊息方塊將顯示Yes與No兩個按鈕，在組合時的列舉值是</small></span><span class="postbody"><small>StandButton 列舉（enum）值，可以參考<a href="http://doc.trolltech.com/4.3.3/qmessagebox.html#StandardButton-enum">線上文件的表格 </a>進行對照。</small></span><span class="postbody"><small>最後一個參數設定預設按鈕是Yes，至於每個字串的設定各是何作用，直接看執行結果比較清
楚，以下顯示的是輸入方塊：<br>





      <br>





      <img style="width: 216px; height: 141px;" alt="" src="images/QInputDialogQMessageBox-1.jpg"><br>





      <br>





以下是按下OK後顯示訊息方塊：<br>





      <br>





      </small><img style="width: 402px; height: 127px;" alt="" src="images/QInputDialogQMessageBox-2.jpg"><br>





      <br>





      <small>以下再介紹一些對話與訊息方塊的樣式。設定預設值為0，下界為0，上界為100，遞增值為1的整數輸入對話方塊 ：<br>





      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">int input = QInputDialog::getInteger(parent, "Input Dialog",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Enter an integer", 0, 0, 100, 1, &amp;isOK);</span></small></span><br style="font-weight: bold;">




      <span class="postbody"></span></div>




      <span class="postbody"><small><br>





      </small><img style="width: 216px; height: 141px;" alt="" src="images/QInputDialogQMessageBox-3.jpg"><br>




      <br>




      <small>設定預設值為0，下界為0，上界為10，小數位數為2位的浮點數輸入對話方塊：<br>




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">double input = QInputDialog::getDouble(parent, "Input Dialog",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Enter a double", 0.0, 0.0, 10.0, 2, &amp;isOK);</span></small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody"><small><br>




      <img style="width: 216px; height: 141px;" alt="" src="images/QInputDialogQMessageBox-4.jpg"><br>




      <br>




一個警示訊息方塊：<br>




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">QMessageBox::warning(parent, "Warning",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Oh! &lt;b&gt;Big Warning!&lt;/b&gt;",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QMessageBox::Yes, QMessageBox::Yes);</span></small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody">
      <br>




      <img style="width: 203px; height: 127px;" alt="" src="images/QInputDialogQMessageBox-5.jpg"><br>




      <br>




      <small>一個禁止訊息方塊：<br>




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span class="postbody"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">QMessageBox::critical(parent, "Critical",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span class="postbody"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Oh! &lt;b&gt;Red Critical!&lt;/b&gt;",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span class="postbody"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QMessageBox::Ok, QMessageBox::Ok);</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span class="postbody"></span></div>




      <span class="postbody"><br>




      <img style="width: 196px; height: 127px;" alt="" src="images/QInputDialogQMessageBox-6.jpg"><br>




      <br>




      <small>一個「關於..」訊息方塊，常用於程式簡介：<br style="font-weight: bold;">




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">QMessageBox::about(parent, "About",</span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "Qt4 Gossip: &lt;b&gt;http://caterpillar.onlyfun.net&lt;/b&gt;");</span></small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody">
      <br>




      <img style="width: 337px; height: 121px;" alt="" src="images/QInputDialogQMessageBox-7.jpg"><br>




      <br>




      <small>訊息方塊的傳回值是根據您按下的按鈕，由左而右依序傳回StandButton 列舉（enum）值，可以參考<a href="http://doc.trolltech.com/4.3.3/qmessagebox.html#StandardButton-enum">線上文件的表格 </a>進行對照。<br>




      <br>




您也可以自訂訊息方塊的圖示、按鈕等選項，以下是一個簡單的示範： <br>




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>QMessageBox message(QMessageBox::NoIcon, "Gossip",</small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
"Show Qt?", QMessageBox::Yes | QMessageBox::No , parent</small></span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>);</small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>message.setIconPixmap(QPixmap("caterpillar.png"));</small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>if(message.exec() == QMessageBox::Yes) {</small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp; QMessageBox::aboutQt(parent, "About Qt");</small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>}</small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody"><small><br>




這個程式設定前兩個按鈕分別為Yes與No顯示與功能，程式中先不設定ICON，而使用setIconPixmap()設定自製的圖檔為圖示，QPixmap支援的圖檔包括BMP、GIF、JPG、PNG等格式（可在 <a href="http://doc.trolltech.com/4.3.3/qpixmap.html">QPixmap 文件中查詢</a>）：<br>




      <br>




      <img style="width: 221px; height: 185px;" alt="" src="images/QInputDialogQMessageBox-8.jpg"><br>




      <br>




      </small></span><span class="postbody"><small>&nbsp;如果按下的是Yes鈕，則顯示Qt版權等相關訊息，這是aboutQt所作的事，以下為執行的畫面： <br>




      <br>




      <img style="width: 506px; height: 477px;" alt="" src="images/QInputDialogQMessageBox-9.jpg"><br>




      </small></span><span class="postbody"><br>














      </span> </td>















      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>





      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>





      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>





      <br>




      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>





      <br>
      
      <center>
      
      
      
      
       <br>





      </center>





 </td>















    </tr>















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>















<br>














<span class="postbody"><br>















<br>















</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/Qt4Gossip/QInputDialogQMessageBox.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:10:02 GMT -->
</html>
