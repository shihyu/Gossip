<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/DisplayVisibilityOpacity.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:39 GMT -->
<head>




















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>顯示、可見度與透明度</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 顯示、可見度與透明度<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><a href="http://openhome.cc/eGossip/JavaScript/DisplayVisibilityOpacity.html">English</a><br>
      </div>
      <small><br>
網頁中經常作的特效，就是將元素隱藏或顯示。隱藏或顯示網頁上有幾種方式可以實作。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">可以透過設定<span style="font-weight: bold;">style</span>屬性的display來顯示或隱藏元素，display設定為<span style="font-weight: bold;">none</span>時，元素就會從畫面上消失，而且不列入排版考量，也就是畫面上看起來，元素原本所佔據的空間消失了，如果設定display為<span style="font-weight: bold;">block</span>則會將元素以區塊方式顯示，像是段落與標題。設定display為<span style="font-weight: bold;">inline</span>則會將元素以行內方式顯示，像是span元素。<br>
      <br>
一個簡單的例子如下所示：<br>
      </span></small>
      <ul>
        <li><small><a href="samples/DisplayVisibilityOpacity-1.html">DisplayVisibilityOpacity-1.html</a></small></li>
      </ul>
      <pre>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN"&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta content="text/html; charset=Big5" http-equiv="content-type"&gt;<br>        &lt;style type="text/css"&gt;<br>            #message {<br>                color: #ffffff;<br>                background-color: #ff0000;<br>                border-width: 10px;<br>                border-color: black;<br>                border-style: solid;<br>                width: 100px;<br>                height: 50px;<br>                padding: 50px;<br>            }<br>        &lt;/style&gt;<br>        &lt;script type="text/javascript"&gt;<br>            window.onload = function(event) {<br>                function style(obj, prop) {<br>                    if(window.getComputedStyle) {<br>                        return window.getComputedStyle(obj, null)[prop];<br>                    }<br>                    else if(obj.currentStyle) {<br>                        return obj.currentStyle[prop];<br>                    }<br>                    else {<br>                        return null;<br>                    }<br>                }<br>                <br>                <span style="font-weight: bold;">function show(element) {<br>                    element.style.display = element.previousDisplay || '';<br>                    if(style(element, 'display') === 'none') {<br>                        var node = document.createElement(element.nodeName);<br>                        document.body.appendChild(node);<br>                        element.style.display = style(node, 'display');<br>                        document.body.removeChild(node);<br>                    }<br>                }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                </span><br style="font-weight: bold;"><span style="font-weight: bold;">                function hide(element) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    element.previousDisplay = style(element, 'display');</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    element.style.display = 'none';</span><br style="font-weight: bold;"><span style="font-weight: bold;">                }</span><br>                <br>                document.getElementById('toggle').onclick = function() {<br>                    var message = document.getElementById('message');<br>                    if(style(message, 'display') === 'none') {<br>                        show(message);<br>                    }<br>                    else {<br>                        hide(message);<br>                    }<br>                };<br>            };<br>        &lt;/script&gt;        <br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;button id='toggle'&gt;切換顯示狀態&lt;/button&gt;<br>        &lt;hr&gt;<br>        這是一些文字！這是一些文字！這是一些文字！這是一些文字！這是一些文字！<br>        &lt;div id="message"&gt;這是訊息一&lt;/div&gt;<br>        這是其它文字！這是其它文字！這是其它文字！這是其它文字！這是其它文字！<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">在上例中，透過將
display設定為none來隱藏元素，並記錄原有的display值，而顯示元素時，若有記錄原display值則恢復為原本的值，否則就使用元素預
設的值，例如&lt;div&gt;會設定為block，而&lt;span&gt;會設定為inline。</span><br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">設定style的<span style="font-weight: bold;">visibility</span>為<span style="font-weight: bold;">visible</span>或<span style="font-weight: bold;">hidden</span>亦可顯示或隱藏元素，元素的visibility被設為hidden時，雖然畫面上看不見，但排版仍會考慮它，也就是元素在畫面上仍會佔有一塊空間。</span><br>
      </small><br>
      <small style="font-family: Courier New,Courier,monospace;">就結論而言，<span style="font-weight: bold;">display其實是指排版上的設定</span>，設定為none時，表示排版上不考慮，既然不考慮排版，所以也就看不見，<span style="font-weight: bold;">visibility則只是單純設定視覺效果</span>。所以display設定為none，而visibility設定為visible時，也是看不見元素的，因為排版上不考慮，而display不是none，而visibility為hidden時，排版上會考慮，所以空間會佔據，但看不到元素。</small><br>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">另一個亦可影響元素視覺效果的是元素的不透明度，元素的不透明度為0時，元素當然就完全看不見了，不過，通常不會用不透明度來顯示或隱藏元素，而會用來作半透明、淡出、淡入的效果。</small><br>
      <br>
      <small>要設定元素的不透明度，存在著瀏覽器差異，標準上是指定<span style="font-family: Courier New,Courier,monospace;">0到1間的數值給style的opacity，1表示完全不透明，0就是透明了。</span>Internet Explorer上則要使用<span style="font-family: Courier New,Courier,monospace;">alpha(opacity=數值)的方式指定給style的filter特性，數值是100到0。一個跨瀏覽設定不透明度的方式如下：<br>
</span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">function opacity(element, value) {</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; if(style(element, 'opacity') !== undefined) {</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.style.opacity = value;</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; else {</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.style.filter = 'alpha(opacity=' + parseInt(value * 100) + ')'</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">}</span></span></small><br style="font-family: Courier New,Courier,monospace;">
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>

      <br>
      <small>元素的不透明度為0時，雖然看不到元素，但排版上仍會考慮它的存在，所以元素仍然佔據空間。下面這個例子，實作了簡單的淡出、淡入，如果元素本身有設定不透明度，淡入時會回復至原有的不透明度：<br>
</small>
      <ul>
        <li><a href="samples/DisplayVisibilityOpacity-2.html"><small>DisplayVisibilityOpacity-2.html</small></a></li>
      </ul>
      <pre>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN"&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta content="text/html; charset=Big5" http-equiv="content-type"&gt;<br>        &lt;script type="text/javascript"&gt;<br>            window.onload = function(event) {<br>                function style(obj, prop) {<br>                    if(window.getComputedStyle) {<br>                        return window.getComputedStyle(obj, null)[prop];<br>                    }<br>                    else if(obj.currentStyle) {<br>                        return obj.currentStyle[prop];<br>                    }<br>                    else {<br>                        return null;<br>                    }<br>                }<br>                <br style="font-weight: bold;"><span style="font-weight: bold;">                function opacity(element, value) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    if(value === undefined) { // 取得不透明度</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        var opt = style(element, 'opacity') </span><br style="font-weight: bold;"><span style="font-weight: bold;">                                     || style(element, 'filter');</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        if(opt === '') {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            return 1;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        if(opt.indexOf('alpha') !== -1)  {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            return opt.substring(14, opt.length - 1) / 100;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        return parseFloat(opt);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                </span><br style="font-weight: bold;"><span style="font-weight: bold;">                    if(style(element, 'opacity') !== undefined) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        element.style.opacity = value;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    else {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        element.style.filter = </span><br style="font-weight: bold;"><span style="font-weight: bold;">                           'alpha(opacity=' + parseInt(value * 100) + ')';</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                </span><br style="font-weight: bold;"><span style="font-weight: bold;">                function fadeIn(element, speed) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    speed = speed || 5000; // 預設速度</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    var target = element.previousOpacity || 1;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    delete element.previousOpacity;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    var step = target / speed * 500;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    var opt = 0;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    setTimeout(function next() {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        opt += step;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        if(opt &lt; target) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            opacity(element, opt);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            setTimeout(next);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        else {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            opacity(element, target);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    }, 500);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                }                </span><br style="font-weight: bold;"><span style="font-weight: bold;">                </span><br style="font-weight: bold;"><span style="font-weight: bold;">                function fadeOut(element, speed) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    speed = speed || 5000;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    element.previousOpacity = opacity(element);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    </span><br style="font-weight: bold;"><span style="font-weight: bold;">                    var step = element.previousOpacity / speed * 500;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    var opt = element.previousOpacity;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    setTimeout(function next() {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        opt -= step;</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        if(opt &gt; 0) {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            opacity(element, opt);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            setTimeout(next);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        else {</span><br style="font-weight: bold;"><span style="font-weight: bold;">                            opacity(element, 0);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                        }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                    }, 500);</span><br style="font-weight: bold;"><span style="font-weight: bold;">                }</span><br style="font-weight: bold;"><span style="font-weight: bold;">                </span><br>                var image = document.getElementById('image');<br>                <br>                document.getElementById('fadeIn').onclick = function() {<br><span style="font-weight: bold;">                   fadeIn(image, 10000);</span><br>                };<br>                <br>                document.getElementById('fadeOut').onclick = function() {<br><span style="font-weight: bold;">                   fadeOut(image, 10000);</span><br>                };<br>            };<br>        &lt;/script&gt;        <br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;button id='fadeOut'&gt;淡出&lt;/button&gt;<br>        &lt;button id='fadeIn'&gt;淡入&lt;/button&gt;&lt;br&gt;<br>        &lt;img id="image" src="../../images/caterpillar_small.jpg"&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <small><br>
      </small>
<small>
      </small>
      <br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/DisplayVisibilityOpacity.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:39 GMT -->
</html>