<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/TypeConversion.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
<head>
















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>型態轉換</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 型態轉換<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
       <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><small><span style="font-family: Courier New,Courier,monospace;"></span></small><a href="http://openhome.cc/eGossip/JavaScript/TypeConversions.html">English</a><small><span style="font-family: Courier New,Courier,monospace;"><br>
</span></small></div>
      <small><br>
在程式語言的分類上，有所謂強型別（Strong type）、弱型別（Weak type）語言，強弱之別是相對的，沒有絕對之分野。<br>
      <br>
Java偏向強型別語言，在Java中運算或操作，較少有自動之型態轉換，舉例來說，字串就是字串，在Java中絕不可能直接作以下之操作：<br style="font-weight: bold;">
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String number1 = "3";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String number2 = "2";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">int result = number1 - number2;</span></small><br>
      </div>
      <small><br>
在強型別中，型態轉換或剖析必須明確操作。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String number1 = "3";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String number2 = "2";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">int result = Integer.parseInt(number1) - Integer.parseInt(number2);</span></small><br>
      </div>


      <small><br>
JavaScript是弱型別語言，字串的減法操作卻是可行的：</small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var number1 = '3';<br>
js&gt; var number2 = '2';<br>
js&gt; var result = number1 - number2;<br>
js&gt; result;<br>
</span>1<br>
            <span style="font-weight: bold;">js&gt; typeof result;</span><br>
number<br>
            <span style="font-weight: bold;">js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      </table>


      <small><br>
強型別語言必須明確進行型態轉換或剖析，避免了許多非預期的型態轉換錯誤，然而帶來了語法上的冗長，弱型別語言則相反，取得了語法簡潔的優點，但必須多注意非預期型態轉換的問題。<br>
      <br>
JavaScript<span style="font-family: Courier New,Courier,monospace;">的基本型態number、string與boolean，會在必要的時候，自動型態轉換為對應的包裹物件<span style="font-weight: bold;">Number</span>、<span style="font-weight: bold;">String</span>與<span style="font-weight: bold;">Boolean</span>。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var num = 10;<br>
js&gt; var binary = num.toString(2);<br>
js&gt; binary;<br>
</span>1010<span style="font-weight: bold;"><br>
js&gt; var binary = (10).toString(2);<br>
js&gt; binary;<br>
            </span>1010<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      </table>



      <small style="font-family: Courier New,Courier,monospace;"><small><br>
      </small>num變數指定的10型態是number，但在作toString()操作時則是物件方有的方法，此時會自動使用
Number實例來包裹10這個number，因此你才可以操作toString()。如果是實字表示，則可以加上()後直接操作toString()，
同樣會為你自動進行型態轉換。</small><br>
      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">類似地，在對string作操作時，若必要，也會自動包裹為String的實例。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var text = 'caterpillar';<br>
js&gt; text.toUpperCase();<br>
</span>CATERPILLAR<span style="font-weight: bold;"><br>
js&gt; 'caterpillar'.toUpperCase();<br>
            </span>CATERPILLAR<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      </table>




      <small style="font-family: Courier New,Courier,monospace;"><small><small><br>
</small></small>toUpperCase()是String上定義的方法，執行環境必要時，會將string使用String包裹，才讓你操作toUpperCase()方法。<br>
      <br>
你可以直接建立包裹物件。例如：</small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">










        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var num = new Number(10);<br>
js&gt; var text = new String('caterpillar');<br>
js&gt; typeof 10;<br>
</span>number<span style="font-weight: bold;"><br>
js&gt; typeof num;<br>
            </span>object<span style="font-weight: bold;"><br>
js&gt; typeof 'caterpillar';<br>
            </span>string<span style="font-weight: bold;"><br>
js&gt; typeof text;<br>
            </span>object<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      </table>





      <br>
      <small style="font-family: Courier New,Courier,monospace;">關於Number、String與Boolean上可操作的方法，可參考：<br>
      </small>
      <ul>
        <li><small style="font-family: Courier New,Courier,monospace;"><a href="http://www.aptana.com/reference/html/api/Number.html">Number</a></small></li>
        <li><small style="font-family: Courier New,Courier,monospace;"><a href="http://www.aptana.com/reference/html/api/String.html">String</a></small></li>
        <li><small style="font-family: Courier New,Courier,monospace;"><a href="http://www.aptana.com/reference/html/api/Boolean.html">Boolean</a></small></li>
      </ul>
      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">你也可以使用<span style="font-weight: bold;">parseInt()</span>、<span style="font-weight: bold;">parseFloat()</span>將字串轉換為數值，其好處是會自動忽略字串尾端非數字部份。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">











        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; parseInt('10 years old...XD');<br>
</span>10<span style="font-weight: bold;"><br>
js&gt; parseFloat('3.14159......');<br>
            </span>3.14159<span style="font-weight: bold;"><br>
js&gt; parseInt('010', 10)<br>
            </span>10<span style="font-weight: bold;"><br>
js&gt; parseInt('010', 8)<br>
            </span>8<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      </table>






      <br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span>後兩個<span style="font-family: Courier New,Courier,monospace;">parseInt()</span>分別指定了基數為10進位或8進位，如果字串以0x開頭，基數預設為16進位，以0開頭，建議指定基數為10或8進位，其它字串則預設為10進位。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">對於字串，如果代表數字的話，可使用+、-、*、/來作運算，不過要注意，<span style="font-weight: bold;">+優先作字串的串接，而非轉換為數字作加法，-、*、/則會轉換為數字</span>。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">












        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; '6' + '2'<br>
</span>62<span style="font-weight: bold;"><br>
js&gt; '6' - '2'<br>
            </span>4<span style="font-weight: bold;"><br>
js&gt; '6' * '2'<br>
            </span>12<span style="font-weight: bold;"><br>
js&gt; '6' / '2'<br>
            </span>3<span style="font-weight: bold;"><br>
js&gt;</span></span></small></td></tr></tbody>
      </table>
      <br>
      <small>在JavaScript中若結合布林值作<span style="font-family: Courier New,Courier,monospace;">+、-、*、/等運算，true會被當作1，而false會被當作0。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">













        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; 1 + true;<br>
</span>2<span style="font-weight: bold;"><br>
js&gt; 1 + false;<br>
            </span>1<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>

      <br>
      <small>布林值很有趣，在真假判斷式中，所有東西都可以轉換為布林值。一個口訣是：<span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">除了0、NaN、''、null、undefinied是假的（false）之外，其它都是真的（true）。</span>這些就是所謂<span style="font-weight: bold;">False Family</span>成員。</small><br>

      <br>
      <small>例如，若物件上不存在某個特性，直接取用該特性會得到<span style="font-family: Courier New,Courier,monospace;">undefined</span>的值，所以若想知道某物件上是否存在該特性，則可以如下：</small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">














        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function exist(obj) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; if(obj.x) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print('x exists.');<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print('x doesn\'t exist.');<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp; &gt; }<br>
js&gt; var o = {};<br>
js&gt; exist(o);<br>
</span>x doesn't exist.<span style="font-weight: bold;"><br>
js&gt; o.x = 10;<br>
            </span>10<span style="font-weight: bold;"><br>
js&gt; exist(o);<br>
            </span>x exists.<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>


      <br>
      <small style="font-family: Courier New,Courier,monospace;">在if中，如果取得undefined，則會當作false。如果你想避免x被設為0、NaN、''、null而造成誤判，則可以作更嚴格的檢查。例如：</small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function exist(obj) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; if(typeof(obj.x) != 'undefined') {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print('x exists.');<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; } else {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print('x doesn\'t exist.');<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp; &gt; }<br>
js&gt; var o = { x : 0 };<br>
js&gt; exist(o);<br>
x exists.<br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>



      <br>
      <small>型態轉換也會發生在相等性比較時，在JavaScript中有兩個相等性運算子<span style="font-family: Courier New,Courier,monospace;">==與===</span>，都可以判斷值或物件參考是否相同，簡單來說，<span style="font-weight: bold;">前者會嘗試將==兩邊轉換</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">為同一型態，再比較是否相等，但後者只要===兩邊型態不一，就會判斷為false</span>。例如：</small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; '' == 0;<br>
</span>true<span style="font-weight: bold;"><br>
js&gt; '' === 0;<br>
            </span>false<span style="font-weight: bold;"><br>
js&gt; null == undefined;<br>
            </span>true<span style="font-weight: bold;"><br>
js&gt; null === undefined;<br>
            </span>false<span style="font-weight: bold;"><br>
js&gt; 1 == true;<br>
            </span>true<span style="font-weight: bold;"><br>
js&gt; 1 === true;<br>
            </span>false<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>




      <br>
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">簡單來說，==執行較寬鬆的比較，可允許型態轉換後的比較，===執行較嚴格的比較，型態必須相同才有可能為true（當然！!=與!==則是相反的操作）</span>。不過，不確定時還是作測試來得好。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">

















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; false == undefined;<br>
</span>false<span style="font-weight: bold;"><br>
js&gt; </span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>





      <small><span style="font-family: Courier New,Courier,monospace;"><br>
在弱型別語言中，型態轉換往往自動發生，最好還是實際測試了解結果，避免不必要的型態轉換而發生誤判或錯誤的運算結果。以上例而言，你還可以明確指定轉換：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; false == Boolean(undefined);<br>
</span>true<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"> </span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>






      <small><span style="font-family: Courier New,Courier,monospace;"><br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;"><br>
      </span></small><br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/TypeConversion.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
</html>