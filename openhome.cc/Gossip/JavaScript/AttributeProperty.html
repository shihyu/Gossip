<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/AttributeProperty.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:25 GMT -->
<head>






















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>屬性與特性</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 屬性與特性<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><a href="http://openhome.cc/eGossip/JavaScript/AttributesProperties.html">English</a><br>
      </div>
      <small><br>
在進入瀏覽器作為客戶端之後，屬性（Attribute）與特性（Property）這兩個名詞就不斷交相出現，到目前還沒正式解釋它們的意義。<br>
      <br>
其實在正式進入瀏覽器作為客戶端前，對於JavaScript物件本身帶有的名稱，這邊的文件都用<span style="font-weight: bold;">特性</span>這個名詞。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var obj = {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; x : 10,</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; y : 20</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">};</span></small><br>
      </div>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">以上文件都稱，物件obj擁有特性x與y，特性x的值為10，特性y的值為20。<br>
      <br>
      </span>HTML本身可以擁有屬性。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;input name="user" value="guest"&gt;</span></small><br>
      </div>
      <small><span style="font-family: Courier New,Courier,monospace;"></span><br>
      <span style="font-family: Courier New,Courier,monospace;">文件中會稱，&lt;input&gt;標籤擁有</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">屬性</span><span style="font-family: Courier New,Courier,monospace;">name與value，屬性值各為user與guest。<br>
      <br>
      <span style="font-weight: bold;">瀏覽器會剖析</span></span><span style="font-weight: bold;">HTML，為每個標籤建立對應的DOM物件，完成剖析後，對於HTML的<span style="color: red;">所有屬性</span>（無論標籤上是否有撰寫），<span style="color: red;">DOM物件上會建立對應的特性</span>，通常屬性名稱是什麼，特性名稱也會是什麼，如果標籤上有設定某個屬性，則屬性值為何，特性值也就為何，<span style="color: red;">如果標籤上沒有設置屬性，則DOM物件上的特性會有預設值</span>。</span><br>
      <br>
例如上例中，<span style="font-family: Courier New,Courier,monospace;">&lt;input&gt;對應的</span>DOM<span style="font-family: Courier New,Courier,monospace;">元素上，name特性與value特性值分別是user與guest。</span>你可以如下分別取得（假設是頁面中第一個<span style="font-family: Courier New,Courier,monospace;">&lt;input&gt;</span>標籤）：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var input = document.getElementsByName('user')[0];</span></small><br style="font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var name = input.name;</span></small><br style="font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var value = input.value;</span></small><br>
      <small><span style="font-weight: bold;"></span></small></div>
      <small><br>
像這時，DOM元素上的<span style="font-family: Courier New,Courier,monospace;">name、value特性，也可以稱之為name與value屬性</span>。也就是說，屬性這個詞，可用來表示HTML中的屬性，也可用來表示DOM中相對應的特性。對於HTML中沒有設定的標籤屬性，DOM上也會有對應的特性（屬性），不過都是預設值，例如，<span style="font-family: Courier New,Courier,monospace;">上面的&lt;input&gt;標籤並沒有設置type屬性，但DOM物件上對應的特性（屬性），其值為"text"。</span><br>
      <br>
不過，<span style="font-weight: bold;">HTML的屬性名稱未必與DOM物件的特性（屬性）名稱相對應</span>。<span style="font-family: Courier New,Courier,monospace;">例如class就是一個例子，因為class</span>在JavaScript中是關鍵字，在DOM上要取得HTML的<span style="font-family: Courier New,Courier,monospace;">class屬性對應名稱必須使用<span style="font-weight: bold;">className</span>，&lt;label&gt;的for屬性，因為for是關鍵字，而必須使用<span style="font-weight: bold;">htmlFor</span>特性</span>來取得。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;img id="logo" src="images/caterpillar.jpg" <br>
&nbsp;&nbsp;&nbsp;&nbsp; class="logo" title="Caterpillar's Logo"/&gt;</span></small><br>
      </div>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small><br>
      <small style="font-family: Courier New,Courier,monospace;">若要以</small><small>JavaScript取得HTML</small><small style="font-family: Courier New,Courier,monospace;">的class屬性值，則必須：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var className = document.getElementById('logo').className;</span></small><br>
      </div>
      <br>
      <small><span style="font-weight: bold;">透過JavaScript特性存取方式取得HTML屬性的對應值，也未必是HTML屬性中真正設定的值。例如，透過JavaScript取得</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;img&gt;的src</span><span style="font-weight: bold;">，結果是絕對URL，即使屬性中設定的是相對URL。</span><br>
      <br>
      <span style="font-weight: bold;">瀏覽器在剖析完HTML後，對於HTML中有設置的屬性，其實會在DOM物件上建立</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">attributes</span><span style="font-weight: bold;">特性。</span>你可以如下顯示<span style="font-family: Courier New,Courier,monospace;">attributes</span>的元素值，每個元素的型態是<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">Attr</span>：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var attributes = document.getElementById('logo').attributes;</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">for(var i = 0; i &lt; attributes.length; i++) {</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; var attrName = attributes[i].nodeName;</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; var attrValue = attributes[i].nodeValue;</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; ...</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">}</span></small><br>
      </div>
      <br>
      <small>以物件結構來表示的話：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">{</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; attributes : {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '0' : {nodeName : 'id', nodeValue : 'logo', ...},</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '1' : {nodeName : 'src', nodeValue : 'images/src', ...},</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '2' : {nodeName : 'class', nodeValue : 'logo', ...},</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '3' : {nodeName : 'title', nodeValue : 'Caterpillar\’s logo', ...},</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; length : 4</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; },</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; id : 'logo',</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; src : 'http://caterpillar.onlyfun.net/images/caterpillar.jpg',</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; className : 'logo',</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; title : 'Caterpillar\'s logo',</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; …</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">}</span></small><br>
      </div>
      <small><span style="font-family: Courier New,Courier,monospace;"><br>
Attr</span>實例上的特性值，是HTML上</small><small>真正</small><small>設定的屬性與值。<span style="font-weight: bold;">在文件剖析完畢後，DOM物件上的屬性（特性）與</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">attributes</span><span style="font-weight: bold;">上<span style="font-family: Courier New,Courier,monospace;">Attr</span>實例之特性是對應的</span><span style="font-weight: bold;"></span>。<br>
      <br>
注意，上面是以物件結構來示意，並不是指真正的型態就是上面所表示的。<span style="font-family: Courier New,Courier,monospace;">attributes的型態會是<a href="http://www.w3schools.com/dom/dom_namednodemap.asp"> NamedNodeMap </a>，而每個索引元素的型態會是<a href="http://www.w3schools.com/dom/dom_attribute.asp"> Attr</a>（如果你手邊有個</span>JavaScript Debugger<span style="font-family: Courier New,Courier,monospace;">的話，可以很方便地觀察這些東西）。</span><br>
      <br>你可以使用DOM物件的<span style="font-family: Courier New,Courier,monospace;">getAttribute()來取得</span><span style="font-weight: bold;"><span style="font-family: Courier New,Courier,monospace;">attributes中的屬性</span></span><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span>，使用setAttribute()設定<span style="font-weight: bold;">attributes</span>中的屬性（同時亦會改變DOM對應的特性），使用removeAttribute()來移除<span style="font-weight: bold;">attributes</span>屬性。<br>
      <br>
      </span><span style="font-weight: bold;">移除屬性是指移除</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">attributes</span><span style="font-weight: bold;">上對應的特性值，而非移除DOM物件上對應的特性（屬性）值，DOM物件上對應的特性（屬性）值在使用</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">removeAttribute()</span><span style="font-weight: bold;">後，只是回到預設值，而不是直接將特性移除，<span style="color: red;">沒有任何操作可以將DOM上對應</span></span></small><small style="font-weight: bold; color: red;">屬性</small><small style="color: red;"><span style="font-weight: bold;">的特性移除。</span></small><small style="font-weight: bold;"><span style="font-family: Courier New,Courier,monospace;">如果</span>HTML<span style="font-family: Courier New,Courier,monospace;">上沒有設置該屬性，則使用getAttribute()指定該屬性會取得null，但並不表示DOM上沒有對應屬性的特性，而是該特性值會是預設值。使用setAttribute()可以在attributes中設定屬性，相對應的DOM特性值也會改變。</span></small><br>
      <small>
      <br>
例如，以下的程式，只會將<span style="font-family: Courier New,Courier,monospace;">attributes中對應src屬性的Attr實例</span>移除，不會移除DOM上<span style="font-family: Courier New,Courier,monospace;">src</span>特性（屬性），DOM上<span style="font-family: Courier New,Courier,monospace;">src</span>只是回到<span style="font-family: Courier New,Courier,monospace;">''</span>的預設值，也就是空字串。<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var img = document.getElementById('logo');<br>
img.removeAttribute('src');<br>
// img.src 的值是 ''，不是undefined<br>
// img.attributes['src'] 是 undefined<br>
      </span></small></div>
      <br>
      <small>如果你直接改變DOM上的特性（屬性），<span style="font-family: Courier New,Courier,monospace;">attributes</span>中對應的屬性並不會有變化。例如：<br>
</small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;input id="user" value="guest"&gt;</span></small><br>
      </div>
      <small><br>
使用以下的程式：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">document.getElementById('user').value = 'Justin';</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var user1 = document.getElementById('user').value; // 值是'Justin'</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var user2 = document.getElementById('user').getAttribute('value'); // 值是'guest'</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
如果你要同時改變<span style="font-family: Courier New,Courier,monospace;">attribues</span>上的屬性與DOM上的特性（屬性），則要使用<span style="font-family: Courier New,Courier,monospace;">setAttribute()</span>。例如：</small><small><br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">document.getElementById('user').setAttribute('value', 'Justin');</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
<small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var user1 = document.getElementById('user').value; // 值'Justin'</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
<small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var user2 = document.getElementById('user').getAttribute('value'); // 值'Justin'</span></small></div>

      <br>
      <small><br>
      </small>
</td>

    </tr>

  </tbody>
</table>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/AttributeProperty.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:25 GMT -->
</html>