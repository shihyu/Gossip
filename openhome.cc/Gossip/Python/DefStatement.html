<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Python/DefStatement.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
<head>














  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>def 陳述句</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Python Gossip: def 陳述句</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"> <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>在Python中要定義函式，是使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">def</span>來定義，例如，以下是個求最大公因數的函式定義：<br>
      </small>
      <pre>def gcd(m, n):<br>    if n == 0:<br>        return m<br>    else:<br>        return gcd(n, m % n)<br><br>print(gcd(20, 30)) # 顯示 10<br></pre>
      <small><br>
      </small><small><span style="font-family: Courier New,Courier,monospace;">在上例中，gcd是函式名稱，m與n為參數（</span>Parameter<span style="font-family: Courier New,Courier,monospace;">）名稱，如果要傳回值則使用<span style="font-weight: bold;">return</span>，如果函式執行完畢但沒有使用return傳回值，則傳回<span style="font-weight: bold;">None</span>。<br>
      <br>
實際上，def是個陳述句，</span>Python<span style="font-family: Courier New,Courier,monospace;">執行到def時，會產生一個函式物件，為function的實例，即然函式是個物件，它可以指定給其它的變數，例如：<br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;"></span></small>
      <pre>def gcd(m, n):<br>    if n == 0:<br>        return m<br>    else:<br>        return gcd(n, m % n)<br><br>print(gcd(20, 30))         # 顯示 10<br>print(type(gcd))           # 顯示 &lt;class 'function'&gt;<br><br>gcd2 = gcd<br>print(gcd2(20, 30))        # 顯示 10<br>print(id(gcd), id(gcd2))   # 兩個顯示的數字相同<br></pre>
      <small><span style="font-family: Courier New,Courier,monospace;"><br>
      在</span>Python<span style="font-family: Courier New,Courier,monospace;">中不支援其它語言函式重載的概念（例如</span>Java<span style="font-family: Courier New,Courier,monospace;">），也就是在</span>Python<span style="font-family: Courier New,Courier,monospace;">中同一個名稱空間中，不能有相同的函式名稱。如果你定義了兩個函式具有相同的名稱但擁有不同的參數個數，則後者定義會覆蓋前者定義。例如：</span></small><small><br></small>
      <table style="text-align: left; width: 100%; font-family: Courier New,Courier,monospace;" border="0" cellpadding="2" cellspacing="2">





        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; def sum(a, b):</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">...&nbsp;&nbsp;&nbsp;&nbsp; return a + b</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">...</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">&gt;&gt;&gt; def sum(a, b, c):</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">...&nbsp;&nbsp;&nbsp;&nbsp; return a + b + c</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">...</span><br>
            <span style="font-weight: bold;">&gt;&gt;&gt; sum(1, 2, 3)</span><br>
6<br>
            <span style="font-weight: bold;">&gt;&gt;&gt; sum(1, 2)</span><br>
Traceback (most recent call last):<br>
&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>
TypeError: sum() takes exactly 3 positional arguments (2 given)<br>
&gt;&gt;&gt;<span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>
      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">
      由於</span>Python<span style="font-family: Courier New,Courier,monospace;">是動態語言，只需在設計時確認傳入函式的物件所擁有的特性或方法，無需採</span></small><small><span style="font-family: Courier New,Courier,monospace;">函式重載中，依型態不同來區別所呼叫函式的部份，至於依參數個數不同來區別的函式重載概念，在</span>Python<span style="font-family: Courier New,Courier,monospace;">中可以使用預設引數（</span>Argument<span style="font-family: Courier New,Courier,monospace;">）來解決。例如：<br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;"></span></small>
      <pre>def sum(a, b, <span style="font-weight: bold;">c = 0</span>):<br>    return a + b + c<br><br>print(sum(10, 20, 30))   # 顯示 60<br>print(sum(10, 20))       # 顯示 30<br></pre>
      <small><span style="font-family: Courier New,Courier,monospace;"><br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;">在上例中，如果沒有指定第三個參數c的值，則預設值是0。事實上，在呼叫函式時，並不一定要依參數宣告順序來傳入引數，而可以指定參數名稱來設定其引數值，稱之為關鍵字引數。例如：<br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;"></span></small>
      <pre>def sum(a, b, c = 0):<br>    return a + b + c<br><br>print(sum(<span style="font-weight: bold;">c = 30, a = 10, b = 20</span>))  # 顯示 60<br></pre>
      <small><span style="font-family: Courier New,Courier,monospace;">
      </span><br>
使用預設值指定時，必須小心指定可變動物件時的一個陷阱，在Python中，<span style="font-family: Courier New,Courier,monospace;">def是個陳述，所以執行到def陳</span>述時，就建立了該陳述相關的資源。來看看下面會有什麼問題？</small><small><br></small>
      
      <table style="text-align: left; width: 100%; font-family: Courier New,Courier,monospace;" border="0" cellpadding="2" cellspacing="2">






        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; def appendTo(element, arr = []):<br>
...&nbsp;&nbsp;&nbsp;&nbsp; arr.append(element)<br>
...&nbsp;&nbsp;&nbsp;&nbsp; return arr<br>
...<br>
&gt;&gt;&gt; appendTo(10, [1, 2, 3])<br>
</span>[1, 2, 3, 10]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; appendTo(10)<br>
            </span>[10]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; appendTo(20, [4, 5, 6])<br>
            </span>[4, 5, 6, 20]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; appendTo(20)<br>
            </span>[10, 20]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; appendTo(30)<br>
            </span>[10, 20, 30]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; appendTo(40)<br>
            </span>[10, 20, 30, 40]<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>

      <br>
      <small style="font-family: Courier New,Courier,monospace;">在上例中，你的
arr預設值設定為空串列，由於def是個陳述，執行到def的函式定義時，就建立了空串列物件，而這個物件會一直存在，如果你沒有指定arr的串列物件
時，所使用的就一直會是一開始指定的預設空串列物件，也因此，隨著每次呼叫都不指定arr的值，你附加的對象，都是同一個物件。</small><br>
      <small><br>
      像<span style="font-family: Courier New,Courier,monospace;">sum</span>這種加總數字的需求，事先可能不知道要傳入的引數個數，可以在定義函式的參數時使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">*</span>，表示該參數接受不定長度引數。例如：<br>
      </small>
      <pre>def sum(<span style="font-weight: bold;">*numbers</span>):<br>    total = 0<br>    for number in numbers:<br>        total += number<br>    return total<br><br>print(sum(1, 2))        # 顯示 3<br>print(sum(1, 2, 3))     # 顯示 6<br>print(sum(1, 2, 3, 4))  # 顯示 10<br></pre>
      <small>
      <br>
你傳入函式的引數，會被收集在一個Tuple中，再設定給<span style="font-family: Courier New,Courier,monospace;">numbers</span>參數。有趣的是，如果你有個函式擁有固定的參數，你可以將一個Tuple傳入，只要在傳入時加上<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">*</span>，則Tuple中每個元素會自動指定給各個參數。例如：<br>
      </small>
      <pre>def sum3(a, b, c):<br>    return a + b + c<br><br>numbers = (1, 2, 3)<br>print(sum3(<span style="font-weight: bold;">*numbers</span>))<br></pre>
      <small><br>
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">**</span>則可以將關鍵字引數收集在一個字典物件中，當一個函式所需要的參數個數很多時，可以使用這個方式。例如：</small><br>
      <table style="text-align: left; width: 100%; font-family: Courier New,Courier,monospace;" border="0" cellpadding="2" cellspacing="2">






        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; def dosome(**args):<br>
...&nbsp;&nbsp;&nbsp;&nbsp; print(args)<br>
...<br>
&gt;&gt;&gt; dosome(name = 'Justin', passwd = 123456, job = '?')<br>
</span>{'passwd': 123456, 'job': '?', 'name': 'Justin'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>

      <br>
      <small>反過來的話，如果函式參數個數固定，你也可以傳給函式一個字典物件，只要在物件前加上**，則Python會依字典物件的鍵名稱，將值指定給對應名稱的參數。例如：<br>
      </small>
      <pre>def sum3(a, b, c):<br>    return a + b + c<br><br>args = {'a' : 1, 'b' : 2, 'c' : 3}<br>print(sum3(<span style="font-weight: bold;">**args</span>))<br></pre>
      <small><br>
你可以在一個函式中，同時使用*與**。例如：</small><br>

      
      <table style="text-align: left; width: 100%; font-family: Courier New,Courier,monospace;" border="0" cellpadding="2" cellspacing="2">







        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; def some(*arg1, **arg2):<br>
...&nbsp;&nbsp;&nbsp;&nbsp; print(arg1)<br>
...&nbsp;&nbsp;&nbsp;&nbsp; print(arg2)<br>
...<br>
&gt;&gt;&gt; some(1, 2, 3)<br>
</span>(1, 2, 3)<br>
{}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; some(a = 1, b = 22, c = 3)<br>
            </span>()<span style="font-weight: bold;"><br>
            </span>{'a': 1, 'c': 3, 'b': 22}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; some(2, a = 1, b = 22, c = 3)<br>
            </span>(2,)<br>
{'a': 1, 'c': 3, 'b': 22}<span style="font-weight: bold;"><br>
&gt;&gt;&gt;<br>
            </span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>
      <small><br>
在Python中，</small><small>函式中還可以定義函式，稱之為區域函式（Local 
function），你可以使用區域函式將某個函式中的演算組織為更小的單元，例如，在 </small><small><a href="../AlgorithmGossip/SelectionInsertionBubble.htm">選
擇排序</a> 的實作時，每次會從未排序部份選擇一個最小值放置到已排序部份之後，在底下的範例中，尋找最小值的演算就實作為區域函式的方式：</small>
      <pre>def selection(number):<br>    # 找出未排序中最小值<br>    <span style="font-weight: bold;">def min(m, j):</span><br style="font-weight: bold;"><span style="font-weight: bold;">        if j == len(number):</span><br style="font-weight: bold;"><span style="font-weight: bold;">            return m</span><br style="font-weight: bold;"><span style="font-weight: bold;">        elif number[j] &lt; number[m]:</span><br style="font-weight: bold;"><span style="font-weight: bold;">            return min(j, j + 1)</span><br style="font-weight: bold;"><span style="font-weight: bold;">        else:</span><br style="font-weight: bold;"><span style="font-weight: bold;">            return min(m, j + 1)</span><br>    <br>    for i in range(0, len(number)):<br>        m = min(i, i + 1)<br>        if i != m:<br>            number[i], number[m] = number[m], number[i]<br><br>number = [1, 5, 2, 3, 9, 7]<br>selection(number)<br>print(number)     # 顯示 [1, 2, 3, 5, 7, 9]<br></pre>
      <small><br>
      </small><small>可以看到，區域函式的好處之一，就是可以直接存取包裹它的外部函式之參數（或宣告在區域函式之前的區域變數），如此可減少呼叫函式時引數的
傳遞。</small><br>
      <small><br>
      </small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Python/DefStatement.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
</html>