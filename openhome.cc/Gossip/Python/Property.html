<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Python/Property.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
<head>











  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>property() 函式</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Python Gossip: property() 函式<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"> <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small style="font-family: Courier New,Courier,monospace;">你定義了一個Ball類別：</small><br>
      <pre>class Ball:<br>    def __init__(self, radius):<br>        self.radius = radius<br></pre>
      <br>
      <small>你可以建立實例並直接存取<span style="font-family: Courier New,Courier,monospace;">radius</span>特性：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball = Ball(1.23)</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">print(ball.radius) </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball.radius = 2.31</span></small><br>
      </div>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">如果這個Ball類別被到處使用，現在你打算修改一下Ball類別，檢查半徑設定不得為小於0，若你這麼修改：</span><br>
      </small>
      <pre>class Ball:<br>    def __init__(self, radius):<br>        if radius &lt;= 0:<br>            raise ValueError('必須是正數')<br>        self.__radius = radius<br>    <br>    def getRadius(self):<br>        return self.__radius
<br>    def setRadius(self, radius):<br>        if radius &lt;= 0:<br>            raise ValueError('必須是正數')<br>        self.__radius = radius<br></pre>
      <small><br>
那麼，你就必須打開每個原先使用到<span style="font-family: Courier New,Courier,monospace;">Ball</span>類別的程式碼檔案並加以修改為：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball = Ball(1.23)</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">print(ball.getRadius()) </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball.setRadius(2.31)</span></small><br>
      </div>


      <small><br>
事實上在Python中，你可以直接使用<span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">property()</span>函式來修改Ball類別。例如：<br>
      </span></small><small><span style="font-family: Courier New,Courier,monospace;"></span></small>
      <pre>class Ball:<br>    def __init__(self, radius):<br>        if radius &lt;= 0:<br>            raise ValueError('必須是正數')<br>        self.__radius = radius<br>    <br>    def getRadius(self):<br>        return self.__radius<br>        <br>    def setRadius(self, radius):<br>        self.__radius = radius<br>        <br>    def delRadius(self):<br>        del self.__radius<br>        <br>    <span style="font-weight: bold;">radius = property(getRadius, setRadius, delRadius, 'radius 特性說明')</span><br></pre>
      <small><span style="font-family: Courier New,Courier,monospace;"><br style="font-family: Courier New,Courier,monospace;">
那麼你就可以如下存取radius特性：<br>
      </span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball = Ball(1.23)</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">print(ball.radius)</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">ball.radius = 2.31</span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">對於radius的存取，會分別轉發呼叫property()所對應的getRadius、setRadius、delRadius所參考的方法，對於使用Ball類別的客戶端而言，並不用作出修改，亦可以達到以上控制存取目的。<br>
      <br>
      </small><small style="font-family: Courier New,Courier,monospace;">property()函式也可以使用修飾器語法，讓程式更為直覺。例如上例修改為以下：<br>
      </small>
      <pre>class Ball:<br>    def __init__(self, radius):<br>        if radius &lt;= 0:<br>            raise ValueError('必須是正數')<br>        self.__radius = radius<br>    <br><span style="font-weight: bold;">    @property</span><br>    def radius(self):<br>        return self.__radius<br>        <br><span style="font-weight: bold;">    @radius.setter</span><br>    def radius(self, radius):<br>        self.__radius = radius<br>    <br><span style="font-weight: bold;">    @radius.deleter</span><br>    def radius(self):<br>        del self.__radius<br></pre>
      <br>
      <small>當然，特性的傳回值，並不一定得有對應的內部資料成員，也可以是計算的結果。例如：<br>
      </small>
      <pre>import math<br>class Ball:<br>    def __init__(self, radius):<br>        if radius &lt;= 0:<br>            raise ValueError('必須是正數')<br>        self.__radius = radius<br>    <br>    @property<br>    def radius(self):<br>        return self.__radius<br>    <br><span style="font-weight: bold;">    @property</span><br style="font-weight: bold;"><span style="font-weight: bold;">    def volumn(self):</span><br style="font-weight: bold;"><span style="font-weight: bold;">        return 4.0 / 3.0 * math.pi * self.__radius ** 3</span><br style="font-weight: bold;"><span style="font-weight: bold;">    </span><br style="font-weight: bold;"><span style="font-weight: bold;">    @volumn.setter</span><br style="font-weight: bold;"><span style="font-weight: bold;">    def volumn(self, volumn):</span><br style="font-weight: bold;"><span style="font-weight: bold;">        if volumn &lt;= 0:</span><br style="font-weight: bold;"><span style="font-weight: bold;">            raise ValueError('必須是正數')</span><br style="font-weight: bold;"><span style="font-weight: bold;">        self.__radius = ((3.0 * volumn) / (4.0 * math.pi)) ** (1.0 / 3.0)</span><br>        <br>ball = Ball(10.0)<br>print(ball.volumn)<br>ball.volumn = 5000<br>print(ball.radius)<br></pre>
      <small><br><span style="font-family: Courier New,Courier,monospace;">上例中，實際上並沒有volume對應的內部資料成員，而是將計算對應至__radius或者是從__radius計算出volume。</span><br>
      <br>
      </small>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Python/Property.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
</html>