<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Python/SetType.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
<head>











  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>集合</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Python Gossip: 集合</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br> <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>在Python中，集合（Set）是無序、元素不重複的集合。在Python3中，要建立集合，可以使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">{}</span>包括元素的實字方式來建立集合。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">






        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; admins = {'Justin', 'caterpillar'}<br>
&gt;&gt;&gt; users = {'momor', 'hamini', 'Justin'}<br>
&gt;&gt;&gt; 'Justin' in admins<br>
</span>True<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins &amp; users<br>
            </span>{'Justin'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins | users<br>
            </span>{'hamini', 'caterpillar', 'Justin', 'momor'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins - users<br>
            </span>{'caterpillar'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins ^ users<br>
            </span>{'hamini', 'caterpillar', 'momor'}<br>
            <span style="font-weight: bold;">&gt;&gt;&gt; admins &gt; users</span><br>
False<br>
            <span style="font-weight: bold;">&gt;&gt;&gt; admins &lt; users</span><br>
False<br>
&gt;&gt;&gt;<span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>

      <br>
      <small style="font-family: Courier New,Courier,monospace;">建立集合後，可以使用<span style="font-weight: bold;">in</span>來測試元素是否在集合中，使用<span style="font-weight: bold;">&amp;</span>作交集運算，使用<span style="font-weight: bold;">|</span>作聯集運算，使用<span style="font-weight: bold;">-</span>作差集運算，使用<span style="font-weight: bold;">^</span>作排除相同元素</small><small style="font-family: Courier New,Courier,monospace;">（XOR）</small><small style="font-family: Courier New,Courier,monospace;">運算，使用<span style="font-weight: bold;">&gt;</span>測試左集合是否為右集合的父集，</small><small><span style="font-family: Courier New,Courier,monospace;">使用<span style="font-weight: bold;">&lt;</span>測試左集合是否為右集合的子集。</span><br>
      <br>
在上例中，亦示範了集合的應用方式之一，利用集合依序測試，'Justin'是否為站長之一？同時是站長也是使用者的有誰？站長與使用者有哪些人？站長中不是使用者的有誰？沒有同時具備站長與使用者身份的有誰？站長群是否為使用者群的父集？站長群是否為使用者群的子集？<br>
      <br>
如果你要建立空集合，不可以直接使用<span style="font-family: Courier New,Courier,monospace;">{}</span>不包括任何元素的實字寫法，因為</small><small><span style="font-family: Courier New,Courier,monospace;">{}</span>不包括任何元素的實字寫法表示一個空字典物件，如果你要建立空集合，必須使用<span style="font-family: Courier New,Courier,monospace;">set</span>類別建構。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; type({})<br>
</span>&lt;class 'dict'&gt;<span style="font-weight: bold;"><br>
&gt;&gt;&gt; type(set())<br>
            </span>&lt;class 'set'&gt;<span style="font-weight: bold;"><br>
&gt;&gt;&gt; family = set()<br>
&gt;&gt;&gt; family<br>
            </span>set()<span style="font-weight: bold;"><br>
&gt;&gt;&gt; family.add('Justin')<br>
&gt;&gt;&gt; family.add('Momor')<br>
&gt;&gt;&gt; family.add('Hamimi')<br>
&gt;&gt;&gt; family<br>
            </span>{'Hamimi', 'Justin', 'Momor'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>


      <br>
      <small>如果你要從字串的字元或串列的元素建立集合物件，不是直接使用實字寫法，而要使用set來建構。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; set('Justin')<br>
</span>{'i', 'J', 'n', 's', 'u', 't'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; set([1, 2, 3, 4])<br>
            </span>{1, 2, 3, 4}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; {'Justin'}<br>
            </span>{'Justin'}<br>
            <span style="font-weight: bold;">&gt;&gt;&gt; {[1, 2, 3, 4]}</span><br>
Traceback (most recent call last):<br>
&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>
TypeError: unhashable type: 'list'<br>
&gt;&gt;&gt;<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>



      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">{'Justin'}</span>是將整個字串放在集合中，而不是將其中每個字元取出，當作個別元素放在集合中。而<span style="font-family: Courier New,Courier,monospace;">{[1, 2, 3,
4]}</span>則會出錯，Python的集合物件要求物件必須實作<span style="font-family: Courier New,Courier,monospace;">__hash__()方法，且必須傳回整數值，串列的__hash__是NoneType，沒有傳回整數值，因而出錯。</span><br>
<br>
先前看過幾個可運用在集合上的運算子，事實上這些操作也以方法的方式存在：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; dir(set())<br>
</span>['__and__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__<br>
format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__iand__', '__in<br>
it__', '__ior__', '__isub__', '__iter__', '__ixor__', '__le__', '__len__', '__lt<br>
__', '__ne__', '__new__', '__or__', '__rand__', '__reduce__', '__reduce_ex__', '<br>
__repr__', '__ror__', '__rsub__', '__rxor__', '__setattr__', '__sizeof__', '__st<br>
r__', '__sub__', '__subclasshook__', '__xor__', <span style="font-weight: bold;">'add', 'clear', 'copy', 'differe</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">nce', 'difference_update', 'discard', 'intersection', 'intersection_update', 'is</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">disjoint', 'issubset', 'issuperset', 'pop', 'remove', 'symmetric_difference', 's</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">ymmetric_difference_update', 'union', 'update'</span>]<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>




      <br>
      <small>使用方法時要記得，在Python2.6與Python3，集合中不可以放入可變動（Mutable）物件。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">










        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; family = {'Justin'}<br>
&gt;&gt;&gt; family<br>
</span>{'Justin'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt; family.add({'Momor', 'Hamini'})<br>
            </span>Traceback (most recent call last):<br>
&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>
TypeError: unhashable type: 'set'<span style="font-weight: bold;"><br>
&gt;&gt;&gt; family.update({'Momor', 'Hamini'})<br>
&gt;&gt;&gt; family<br>
            </span>{'Hamini', 'Justin', 'Momor'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>





      <br>
      <small>如果使用<span style="font-family: Courier New,Courier,monospace;">add()</span>方法給定一個集合物件，由於集合物件是可變動的，不能加入目標集合中，而需要將元素一個一個取出，再加入目標集合中，這可以使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">update()</span>方法來完成。也就是相當於：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">











        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; family = {'Justin'}<br>
&gt;&gt;&gt; for person in {'Momor', 'Hamini'}:<br>
...&nbsp;&nbsp;&nbsp;&nbsp; family.add(person)<br>
...<br>
&gt;&gt;&gt; family<br>
</span>{'Hamini', 'Justin', 'Momor'}<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>






      <br>
      <small>上例中亦示範了，<span style="font-family: Courier New,Courier,monospace;">for</span>迴圈可以用在集合物件上，一個一個取出元素。<br>
      <br>
      </small><small>Python是強型別語言，在集合運算時，&amp;、|等運算子左右運算元必須都是集合物件。如果右運算元不是集合物件，但想要將其中的元素取出作集合運算的話，就可以借助方法。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">












        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; admins = {'Justin', 'caterpillar'}<br>
&gt;&gt;&gt; users = ['momor', 'hamini', 'Justin']<br>
&gt;&gt;&gt; admins &amp; users<br>
</span>Traceback (most recent call last):<br>
&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>
TypeError: unsupported operand type(s) for &amp;: 'set' and 'list'<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins.intersection(users)<br>
{'Justin'}<br>
&gt;&gt;&gt; admins | users</span><br>
Traceback (most recent call last):<br>
&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>
TypeError: unsupported operand type(s) for |: 'set' and 'list'<span style="font-weight: bold;"><br>
&gt;&gt;&gt; admins.union(users)<br>
{'hamini', 'caterpillar', 'Justin', 'momor'}<br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>







      <br>
      <br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Python/SetType.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
</html>