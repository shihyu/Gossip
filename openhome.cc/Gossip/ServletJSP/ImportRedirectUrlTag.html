<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/ImportRedirectUrlTag.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:54 GMT -->
<head>

















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>網頁匯入、重新導向、URL 處理標籤</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Servlet/JSP Gossip: 網頁匯入、重新導向、URL 處理標籤<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br>      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
</td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>到目前為止學過了兩種包括其它JSP網頁至目前網頁的方式。一個是透過<span style="font-family: Courier New,Courier,monospace;">include</span>指示元素，它在轉譯時期直接將另一JSP網頁合併至目前網頁進行轉譯，例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;">&lt;%@include file="/WEB-INF/jspf/header.jspf"%&gt;</small><br>
      </div>
      <small><br>
另一個方式是透過<span style="font-family: Courier New,Courier,monospace;">&lt;jsp:include&gt;</span>標籤，可於執行時期依條件，動態決定是否包括另一個網頁，該網頁執行完畢後，再回到目前網頁。在包括另一網頁時還可以帶有參數，例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;jsp:include page="add.jsp"&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;jsp:param name="a" value="1" /&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;jsp:param name="b" value="2" /&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;/jsp:include&gt;</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
在JSTL中，<span style="font-family: Courier New,Courier,monospace;">有個<span style="font-weight: bold;">&lt;c:import&gt;</span>標籤，可以視作是&lt;jsp:include&gt;的加強版，它可以於執行時期動態匯入另一個網頁，也可以搭配<span style="font-weight: bold;">&lt;c:param&gt;</span>在匯入另一網頁時帶有參數。例如上面的&lt;jsp:include&gt;範例片段</span>，也可以改寫為以下使用JSTL的版本：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;c:import url="add.jsp"&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;c:param name="a" value="1" /&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;c:param name="b" value="2" /&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;/c:import&gt;</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
除了可以匯入目前Web應用程式中的網頁之外，<span style="font-family: Courier New,Courier,monospace;">&lt;c:import&gt;</span>標籤還可以匯入非目前Web應用程式中的網頁。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;c:import url="http://openhome.cc" charEncoding="BIG5"/&gt;</span></small><br>
      </div>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">其中charEncoding屬性用來指定要匯入的網頁之編碼，如果要被匯入的網頁編碼與目前網頁編碼不同，就必須使用charEncoding屬性加以指定，匯入的網頁才不致於產生亂碼。</span><br>
      <br>
再來介紹<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;c:redirect&gt;</span>標籤。在Servlet／JSP中，如果要以撰寫程式的方式進行重新導向，必須使用<span style="font-family: Courier New,Courier,monospace;">HttpServletResponse的sendRedirect()</span>方法。<span style="font-family: Courier New,Courier,monospace;">&lt;c:redirect&gt;標籤的作用，就如同sendRedirect()方法</span>，如此你就不用撰寫Scriptlet來使用<span style="font-family: Courier New,Courier,monospace;">sendRedirect()</span>方法，也可以達到重新導向的作用。如果重新導向時需要參數，也可以透過<span style="font-family: Courier New,Courier,monospace;">&lt;c:param&gt;</span>來設定。<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;c:redirect url="add.jsp"&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;c:param name="a" value="1"/&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;c:param name="b" value="2"/&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;/c:redirect&gt;</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
      我們曾經談過使用<span style="font-family: Courier New,Courier,monospace;">response的encodeURL()</span>方法來作URL重寫，以在使用者關閉Cookie功能時，仍可以繼續利用URL重寫來維持使用session進行會話管理。<br>
      <br>
如果不想使用Scriptlet撰寫<span style="font-family: Courier New,Courier,monospace;">response的encodeURL()</span>方法來作URL重寫，則可以使用JSTL的<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;c:url&gt;</span>，它會在使用者關閉Cookie功能時，自動用Session ID作URL重寫。例如：<br>
</small>
      <pre>&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;<br>&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;<br>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"<br>"http://www.w3.org/TR/html4/loose.dtd"&gt;<br>&lt;c:set var="count" value="${sessionScope.count + 1}" scope="session"/&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv="Content-Type"<br>              content="text/html; charset=UTF-8"&gt;<br>        &lt;title&gt;JSP Count&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;h1&gt;JSP Count ${sessionScope.count} &lt;/h1&gt;<br>        &lt;a href="&lt;c:url value='count.jsp'/&gt;"&gt;遞增&lt;/a&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt; <br></pre>
      <small><br>
當你關閉瀏覽器Cookie功能時，這個JSP網頁仍可以有計數功能。如果需要在URL上攜帶參數，則可以搭配<span style="font-family: Courier New,Courier,monospace;">&lt;c:param&gt;</span>標籤，參數將被編碼後附加在URL之上。例如就以下這個片段而言，最後的URL將成為some.jsp?name=Justin+Lin：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;c:url value="some.jsp"&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;c:param name="name" value="Justin Lin"/&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;/c:url&gt;</small><br>
      </div>
      <small><br>
<br>
      <br>

      </small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/ImportRedirectUrlTag.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:54 GMT -->
</html>