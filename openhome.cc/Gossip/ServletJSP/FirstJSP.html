<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/FirstJSP.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:49 GMT -->
<head>















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>第一個 JSP</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Servlet/JSP Gossip: 第一個 JSP<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br> <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>相較於 <a href="FirstServlet.html">第一個 Servlet</a>，要寫第一個JSP是簡單多了，只要一個副檔名為<span style="font-weight: bold;">.jsp</span>的檔案就可以了。例如以下是可以達到與第一個Servlet中相同功能的JSP：<br>
      </small>
      <ul>
        <li><small>hello.jsp</small></li>
      </ul>
      <pre>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Hello Servlet&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;h1&gt; Hello! World!&lt;/h1&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <small><br>
看起來就像是個HTML？別急，還沒有要到接觸動態的部份，將這個檔案封裝為WAR後部署到Web容器，用瀏覽器直接瀏覽網站存取hello.jsp，當然！你會看到瀏覽器上顯示以上HTML網頁的結果。<br>
      <br>
      </small><small>雖然只用來輸出HTML，</small><small>但它確實是個JSP，容器會在你第一次存取JSP檔頁時，將JSP轉譯為.java，然後再編譯為.class，之後載入容器進行處理並提供服務。舉例來說，如果你是使用Tomcat 7或Glassfish v3，那麼上面這個JSP轉譯後的結果會如下所示：<br>
      </small>
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">package org.apache.jsp;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">import javax.servlet.*;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">import javax.servlet.http.*;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">import javax.servlet.jsp.*;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">public final class hello_jsp extends org.apache.jasper.runtime.HttpJspBase</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; implements org.apache.jasper.runtime.JspSourceDependent {<br>
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp; 略...</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; public void _jspService(<span style="color: red;">HttpServletRequest request, </span><br style="color: red;">
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
HttpServletResponse response</span>)</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws java.io.IOException, ServletException {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; <span style="color: red;">PageContext pageContext = null;</span></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; HttpSession session = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; ServletContext application = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; ServletConfig config = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; JspWriter out = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; Object page = this;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; JspWriter _jspx_out = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; PageContext _jspx_page_context = null;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...略<br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&lt;html&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;head&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
out.write("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&lt;title&gt;Hello Servlet&lt;/title&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;/head&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;body&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;h1&gt; Hello! World!&lt;/h1&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;/body&gt;\n");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="color: red;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&lt;/html&gt;");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; } catch (Throwable t) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...略</span></small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; } finally {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...略</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </div>
      <small><br>
其中</small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">HttpJspBase</span><span style="font-family: Courier New,Courier,monospace;">繼承自HttpServlet，無疑地，</span>JSP最後也變成Servlet了<span style="font-family: Courier New,Courier,monospace;">，也正如你所看到的，你在</span>JSP<span style="font-family: Courier New,Courier,monospace;">中寫的</span>HTML<span style="font-family: Courier New,Courier,monospace;">，是透過物件（out）來輸出字串，就如在第一個</span>Servlet<span style="font-family: Courier New,Courier,monospace;">中所看到的範例。</span></small><br>
      <small><br>
相較於寫Servlet，寫JSP是簡單多了，因為JSP最後會轉譯為Servlet，所以Servlet作的到的事，基本上JSP也都作的到，許多的書
會直接從JSP開始教學，因為簡單，不過，你了解Servlet越多，你JSP自然就越熟悉，例如，在上面的程式中，你看到<span style="font-family: Courier New,Courier,monospace;">request、
response、session、config、out</span>等名稱，當你之後學JSP時就會知道，這些名稱正是JSP中所謂<span style="font-weight: bold;">隱含物件（Implicit object）</span>，事實上它們在轉譯為Servlet之後就是個</small><small>參數或</small><small>區域變數。<br>
      <br>
使用JSP，基本上無需任何設定，你存取的URL就指定了你要使用哪個JSP頁面，然後如果願意，你也可以web.xml中對JSP進行設定，一個應用的場合可能是設定初始參數。例如：<br>
      </small>
      <ul>
        <li><small>web.xml</small></li>
      </ul>
      <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" <br>xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" <br>xsi:schemaLocation="http://java.sun.com/xml/ns/javaee <br>http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"&gt;<br><span style="font-weight: bold;">    &lt;servlet&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;servlet-name&gt;helloJSP&lt;/servlet-name&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;jsp-file&gt;/hello.jsp&lt;/jsp-file&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;init-param&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">            &lt;param-name&gt;defaultGuestName&lt;/param-name&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">            &lt;param-value&gt;Guest&lt;/param-value&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;/init-param&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">    &lt;/servlet&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">    &lt;servlet-mapping&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;servlet-name&gt;helloJSP&lt;/servlet-name&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">        &lt;url-pattern&gt;/hello.jsp&lt;/url-pattern&gt;</span><br style="font-weight: bold;"><span style="font-weight: bold;">    &lt;/servlet-mapping&gt;</span><br>&lt;/web-app&gt;<br></pre>
      <small><br>
在上例中，你在<span style="font-family: Courier New,Courier,monospace;">&lt;servlet&gt;中使用<span style="font-weight: bold;">&lt;jsp-file&gt;</span>指定實際上helloJSP這個名稱的</span>Servlet，會是由hello.jsp來服務，並且該Servlet有初始參數<span style="font-family: Courier New,Courier,monospace;">defalutGuestName與值Guest</span>。你可以在JSP中取得這個它們。例如：<br>
      </small>
      <ul>
        <li><small>hello.jsp</small></li>
      </ul>
      <pre>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;title&gt;Hello Servlet&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;h1&gt; Hello! <span style="font-weight: bold;">&lt;%= config.getInitParameter("defaultGuestName") %&gt;</span>!&lt;/h1&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <br>
      <small>當你的瀏覽器觀看這個JSP時，畫面會顯示Hello! Guest!的結果。暫且不用擔心中間還有一些API細節，上面的例子只是在告訴你，必要時可以為JSP在web.xml中作些設定。<br>
      <br>
順便補充一下，最後這個例子若要可以運行，其WAR的結構要是：<br>
      </small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">/JSPDemo.war/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |hello.jsp<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
</span></small>
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: red;">/WEB-INF/</span></span></span></small><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"><br>
      </span></span></small><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; |<span style="color: red;">web.xml<span style="color: black;"></span><br>
</span></span></span></small>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>

      <small><span style="font-family: Courier New,Courier,monospace;"><br></span></small><br>
      <br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/FirstJSP.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:49 GMT -->
</html>