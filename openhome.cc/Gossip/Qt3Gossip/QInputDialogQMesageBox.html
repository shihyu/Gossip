<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/Qt3Gossip/QInputDialogQMesageBox.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:23:01 GMT -->
<head>











  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">











  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">











  
  
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">










  
  
  
  
  
  
  
  
  
  
  <title>QInputDialog 與 QMesageBox</title>
</head>


<body>











<h3><a href="../index.html">From
Gossip@Openhome</a></h3>











<h1><a href="index.html">Qt3 Gossip: QInputDialog 與 QMessageBox</a></h1>











<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">











  <tbody>











    <tr>











      <td style="width: 676px; vertical-align: top;"> <small>在程式中常出現一些簡單的對話或訊息方塊，我們在這邊介紹的QInputDialog與QMessageBox算是最常見的類型，它們的使用非常簡單，以下先看個簡單的程式，請編輯main.cpp。 <br>




      </small>
      
      
      
      
      <ul>




        <li>main.cpp</li>




      
      
      
      
      </ul>




      
      
      
      
      <pre>#include &lt;qapplication.h&gt;<br>#include &lt;qlineedit.h&gt;<br>#include &lt;qinputdialog.h&gt;<br>#include &lt;qmessagebox.h&gt;<br><br>int main(int argc, char **argv) {<br>    QApplication app(argc, argv);<br>    bool ok;<br><br>    QString text = QInputDialog::getText("Input text",<br>                   "please input a text", QLineEdit::Normal, "default", &amp;ok);<br>    if(ok)<br>        QMessageBox::information(0, "QMessageBox::information",<br>            "Your input is: &lt;u&gt;" + text + "&lt;/u&gt;",<br>             "OK", "Cancel", "Help", 0, 1);<br><br>    return 1;<br>}</pre>




      <small><br>




在這個程式中，QInputDialog使用getText方法來取得使用者輸入字串，然後使用QMessageBox來顯示輸入的字串；
QInputDialog若取得輸入，則會在ok中填入true，由此可判斷使用者是否有輸入，QMessageBox比較特殊的功能在於，它可以使用一
些基本的html語法來設定文字的顯示，其中第一個0表示這個QMessageBox不屬於任一個類別，第二個0表示這個QMessageBox的名稱，
再來的1表示設定為獨佔模式（model），使用者必須回應這個訊息方塊才能繼續操作程式；至於每個字串的設定各是何作用，直接看執行結果比較清楚：<br>




      <img style="width: 408px; height: 113px;" alt="" src="images/QInputDialogQMesageBox-1.jpg"><br>




      <br>




      <img style="width: 288px; height: 126px;" alt="" src="images/QInputDialogQMesageBox-2.jpg"><br>




      <br>




以下再介紹一些對話與訊息方塊的樣式。<br>




      <br>




      </small><small>設定預設值為0，下界為0，上界為100，step為1的整數輸入對話方塊</small><small> ：</small>
      
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">QInputDialog::getInteger("Input integer", </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "enter a integer", 0, 0, 100, 1, &amp;ok); </span></small><br style="font-weight: bold;">




      </div>




      <small><br>




      <img style="width: 408px; height: 113px;" alt="" src="images/QInputDialogQMesageBox-3.jpg"><br>




      <br>




設定預設值為0，下界為0，上界為10.0，小數位數為2位的浮點數輸入對話方塊：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">QInputDialog::getDouble("Input double", </small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">




      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "enter a double", 0.0, 0.0, 10.0, 2, &amp;ok); </small><br>




      </div>




      <br>




      <img style="width: 408px; height: 113px;" alt="" src="images/QInputDialogQMesageBox-4.jpg"><br>




      <br>




      <small>一個警示訊息方塊： <br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">QMessageBox::warning(0, "QMessageBox::warning", </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "a warning messagebox!", "ok", "quit", 0, 0, 1); </span></small><br>




      </div>




      <br>




      <img style="width: 226px; height: 125px;" alt="" src="images/QInputDialogQMesageBox-5.jpg"><br>




      <br>




      <small><span class="postbody">一個禁止訊息方塊：</span><br style="font-weight: bold;">




      </small>





      
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">QMessageBox::critical(0, "QMessageBox::critical", </span></small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "a critical messagebox!", "ok", "quit", 0, 0, 1); </span></small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody"><br>




      <img style="width: 233px; height: 125px;" alt="" src="images/QInputDialogQMesageBox-6.jpg"><br>




      <br>




      </span><small><span class="postbody">一個「關於..」訊息方塊，常用於程式簡介</span><br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace; font-weight: bold;" class="postbody"><small>QMessageBox::about(0, "QMessageBox::about", </small></span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">




      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "This is caterpillar's qt tutorial!"); </small></span><br>




      <span class="postbody"></span></div>




      <span class="postbody"><br>




      <img style="width: 317px; height: 125px;" alt="" src="images/QInputDialogQMesageBox-7.jpg"><small><br>




      <br>




訊息方塊的傳回值是根據您按下的按鈕，由左而右依序傳回1、2、3，我們可以使用switch比對傳回值以進行對應的處理，一個範例片段如下所示： <br>




      </small></span>
      
      
      
      
      <div style="margin-left: 40px;"><span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>switch( QMessageBox::warning( this, "Application name", </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Could not connect to the &lt;mumble&gt; server.\n" </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "This program can't function correctly " </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "without the server.\n\n", </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Retry", </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Quit", 0, 0, 1 ) ) </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp; case 0: // The user clicked the Retry again button or pressed Enter </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // try again </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break; </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp; case 1: // The user clicked the Quit or pressed Escape </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // exit </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break; </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"><small>} </small></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;" class="postbody"></span><br>




      <span class="postbody"></span></div>




      <span class="postbody"><small>您也可以自訂訊息方塊的圖示、按鈕等選項，以下是一個簡單的示範： <br>




      </small></span><span class="postbody"></span>
      
      
      
      
      <pre>#include &lt;qapplication.h&gt;<br>#include &lt;qlineedit.h&gt;<br>#include &lt;qinputdialog.h&gt;<br>#include &lt;qmessagebox.h&gt;<br>#include &lt;qpixmap.h&gt;<br><br>int main(int argc, char **argv) {<br>    QApplication app(argc, argv);<br><br>    QMessageBox messagebox("Costumize",<br>                "show Qt?", QMessageBox::NoIcon,<br>                 QMessageBox::Yes | QMessageBox::Default,<br>                 QMessageBox::No | QMessageBox::Escape,<br>                 QMessageBox::NoButton);<br><br>    messagebox.setIconPixmap(QPixmap("dog.xpm"));<br><br>    if(messagebox.exec() == QMessageBox::Yes)<br>       QMessageBox::aboutQt(0, "About Qt");<br><br>    return 1;<br>}</pre>




      <span class="postbody"><small><br>




QMessageBox主要有三個按鈕，這個程式設定前兩個按鈕分別為Yes與No顯示與功能，第三個按鈕不使用，而預設選項為Yes鈕，按下Esc鍵會自動按No鈕；我們先不設定ICON，而使用setIconPixmap()設定自製的圖檔為圖示。 <br>




      <br>




如果按下的是Yes鈕，則顯示Qt版權等相關訊息，這是aboutQt所作的事，以下為執行的畫面： <br>




      </small><img style="width: 240px; height: 173px;" alt="" src="images/QInputDialogQMesageBox-8.jpg"><br>




      <br>




      <img style="width: 502px; height: 283px;" alt="" src="images/QInputDialogQMesageBox-9.jpg"><br>




      <br>




      <br>




      <br>










      </span> </td>











      <td style="width: 250px; text-align: center; vertical-align: top;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
      <br>
      <br>
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>





      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>





      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>





      <br>




      
      
      
      
      <center>
      
      
      
      
       <br>





      </center>





 </td>











    </tr>











  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>











<br>










<span class="postbody"><br>











<br>











</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/Qt3Gossip/QInputDialogQMesageBox.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:23:10 GMT -->
</html>
