<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/BuildDOMLibrary.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:26 GMT -->
<head>





























  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>封裝 DOM 操作</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 封裝 DOM 操作<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><a href="http://openhome.cc/eGossip/JavaScript/DOMLibrary.html">English</a><br>
      </div>
      <small><br>
DOM原本的API在撰寫上不僅冗長，而且不方便，在這邊將為DOM API作為簡單的封裝，這邊以<big> </big></small><small><big><a href="BuildUtilityFunction.html"><small>建立核心公用函式</small></a></big> 為基礎，繼續API的封裝。首先，調整一下原有的程式為如下的架構，相關說明直接撰寫於註解中：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">(function(global) {<br>
      <span style="color: red;">&nbsp;&nbsp;&nbsp; // 現在讓 XD 參考至函式，並作為名稱空間</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; var XD = function(selector, container) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new XD.mth.init(selector, container);</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; };<br>
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; // 公用函式先放在一個暫時物件集中</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; <span style="color: red;">var utils = {</span></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; trim: function(text) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return (text || '').replace( /^(\s|\u00A0)+|(\s|\u00A0)+$/g, '');</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; },<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; };</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; <br>
      <span style="color: red;">&nbsp;&nbsp;&nbsp; // 這個函式可以將source上的特性合併至target上成為特性</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; function extend(target, source) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; utils.each(source, function(value, key) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; target[key] = value;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp; &nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp; </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; // 將utils上的特性合併至XD<br>
&nbsp;&nbsp;&nbsp; extend(XD, utils);<br>
&nbsp;&nbsp;&nbsp; //extend函式亦可為公用函式，故以XD作為名稱空間<br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; XD.extend = extend;<br>
&nbsp;&nbsp;&nbsp; // 標準化屬性名稱<br>
&nbsp;&nbsp;&nbsp; XD.props = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'for': 'htmlFor',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'class': 'className',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; readonly: 'readOnly',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxlength: 'maxLength',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cellspacing: 'cellSpacing',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rowspan: 'rowSpan',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; colspan: 'colSpan',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tabindex: 'tabIndex',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; usemap: 'useMap',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; frameborder: 'frameBorder'<br>
&nbsp;&nbsp;&nbsp; };<br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
</span></small>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small><br>
      <small style="font-family: Courier New,Courier,monospace; color: red; font-weight: bold;">&nbsp;&nbsp;&nbsp; // 這邊以下再解釋</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; XD.mth = XD.prototype = {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init: function(selector, container) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;"></span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;"></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; };</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp; </span></small><small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;"></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <small style="font-family: Courier New,Courier,monospace; color: red;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; XD.mth.init.prototype = XD.mth;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; global.XD = XD;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">})(this);</span></small><br>
      </div>
      <small><br>
調整為以上架構的目的在於，希望<span style="font-family: Courier New,Courier,monospace;">XD()函式可以封裝getElementById()與getElementsByTagName()</span>的操作。例如，你可以傳入<span style="font-family: Courier New,Courier,monospace;">id</span>：<br style="font-weight: bold;">
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('#xyz');&nbsp; // 傳回一個物件，物件索引0是id為xyz的元素。</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('#xyz, #abc');&nbsp; // 傳回一個物件，物件索引0是id為xyz的元素、索引1是id為abc的元素</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('#xyz, #abc, #123'); // 如上類推，索引2是id為123的元素<br>
      </span></small></div>
      <small><br>
也可以傳入標籤名：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img');&nbsp; // 傳回一個物件，收集了所有img元素，可使用索引存取</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img, div');&nbsp; // 傳回一個物件，</span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">收集了所有img與div元素，可使用索引存取</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img, div, a'); // </span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">傳回一個物件，</span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">收集了所有img、div、a元素，可使用索引存取<br>
XD('img', XD('#container')); // 以id為container的元素開始，取得img元素<br>
</span></small></div>


      <small><br>
或者是傳入標籤來建立元素。例如：<br>
</small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('&lt;img&gt;');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 建立img元素，收集在傳回的物件</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">XD('&lt;img&gt;,&lt;div&gt;'); // 建立img、div元素</small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">，收集在傳回的物件</span></small></div>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">從上面的架構知道，呼叫函式XD()，內部會建立XD.mth.init()的實例，而XD.mth.init()的實作如下：</span><br>
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; XD.mth = XD.prototype = {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init: function(selector, container) {<br>
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 這是元素</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: red;">if(selector.nodeType) {</span><br style="color: red;">
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this[0] = selector;</span><br style="color: red;">
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.length = 1;</span><br style="color: red;">
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this;</span><br style="color: red;">
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br>
      <span style="color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 如果有指定容器（XD()傳回的物件）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 使用容器上第一個元素來呼叫getElementById()或getElementsByTagName()</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: red;">if(container &amp;&amp; container[0]) {</span></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container = container[0];</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else { // 否則，使用document</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; container = document;</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 先用Array收集元素</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var elements = [];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 可以指定多個，用,區隔<br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XD.each(selector.split(','), function(text) {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; text = XD.trim(text);</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(text.charAt(0) === '#') { // 這是指定id</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
elements.push(container.getElementById(text.substring(1)));</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else if(text.charAt(0) === '&lt;') { // 這是指定&lt;tag&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
elements.push(document.createElement(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
text.substring(1, text.length - 1)));<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
</span>
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else { // 否則就是指定標籤</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
XD.each(container.getElementsByTagName(text), function(element) {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
elements.push(element);</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 將Array上的元素複製至this<br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XD.extend(this, elements);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 順便指定一下收集了幾個元素<br style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">
      </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.length = elements.length;</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp; };</span></small><br>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">要記得，new
之後接的函式若無傳回值，預設是傳回this。在上頭的程式中，XD.mth與XD.prototype都是參考至同一物件，之後
XD.mth.init.prototype再參考至XD.mth，這表示，透過XD.mth.init建立的實例，將可以取得XD.mth上的方法。例
如，如果在物件上新增一些簡單的方法：<br>
      <span style="font-weight: bold;">&nbsp;&nbsp; XD.mth = XD.prototype = {</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; init: function(selector, container) {</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size: function() { // 收集了幾個物件</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this.length;</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isEmpty: function() {&nbsp; // 是否為空（沒有收集半個物件）</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this.length === 0;</span><br style="font-weight: bold; color: red;">
      <span style="font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">&nbsp;&nbsp; };</span><br>
      </small><br>
      <small style="font-family: Courier New,Courier,monospace;">假設文件中有兩個&lt;img&gt;，則你可以如下收集並得到size結果為2，isEmpty為false：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var size = XD('img').size();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 2<br>
var isEmpty = XD('img').isEmpty();&nbsp; // false<br>
      </span></small></div>
      <br>
      <small>這邊再示範幾個方法的建立：<br>
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp; XD.mth = XD.prototype = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;"></span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; each: function(callback) {</span><br style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return XD.each(this, callback);</span><br style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span><br style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; html: function(value) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(value === undefined) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return this[0] &amp;&amp; this[0].nodeType === 1 ?<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this[0].innerHTML : null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return XD.each(this, function(element) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(element.nodeType === 1) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
element.innerHTML = value;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; attr: function(name, value) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name = XD.props[name] || name;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(value === undefined) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return this[0] &amp;&amp; this[0].nodeType !== 3 &amp;&amp;
this[0].nodeType !== 8 ?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this[0][name] : undefined;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return XD.each(this, function(element) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(element.nodeType !== 3 &amp;&amp; element.nodeType !== 8) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
element[name] = value;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val: function(value) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 先只處理 &lt;input&gt; 元素<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(value === undefined) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return this[0] &amp;&amp; this[0].nodeName === 'INPUT' ? <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this[0].value : null;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return XD.each(this, function(element) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(element.nodeName === 'INPUT') {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
element.value = value;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; append: function(childs) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(typeof childs === 'string' || childs.nodeType) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; childs = XD(childs);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(this.length === 1) { // 只有一個父節點<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var parent = this[0];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XD.each(childs, function(child) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
parent.appendChild(child);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if(this.length &gt; 1){ // 有多個父節點<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XD.each(this, function(parent) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
childs.each(function(child) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// 複製子節點<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
var container = document.createElement('div');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
container.appendChild(child);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
container.innerHTML = container.innerHTML;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
parent.appendChild(container.firstChild);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; remove: function() { // 從父節點移除<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return XD.each(this, function(element) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; element.parentNode.removeChild(element);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp; };</span></small><br>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">each()方法可以讓你指定回呼函式，對收集的元素都會呼叫操作，每次呼叫時，回呼函式的第一個引數就是當時的DOM元素，而this也設為當時的</small><small>DOM</small><small style="font-family: Courier New,Courier,monospace;">元素。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img').each(function(element) {</span></small><br style="font-weight: bold;">
<small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; var src1 = element.src;<br>
</span></small>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; var src2 = this.src;</span></small><br style="font-weight: bold;">

<small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; ...</span></small><br style="font-weight: bold;">
<small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">});</span></small><br>
      </div>

      <br>
      <small style="font-family: Courier New,Courier,monospace;">如果你有多個元素要設定其innerHTML，則可以如下：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('div').html('&lt;b&gt;文字&lt;/b&gt;');</span></small><br>
      </div>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">如果有多個div元素，則以上會將所有div元素的innerHTML都設為指定的文字。如果沒有指定文字，例如以下預設取得所收集元素的第一個div的innerHTML：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var html = XD('div').html();</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
類似的，attr()可用來設置取得取屬性：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img').attr('src', 'caterpillar.jpg'); // 設定所有收集的img元素的src屬性</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img').attr('src'); // 取得所收集第一個img元素的src屬性</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small></div>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">val()則可以讓你取得或設定&lt;input&gt;的value：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('input').val('default');&nbsp; // 將所有&lt;input&gt;的value設定為'default'</span></small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('input').val();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 取得第一個&lt;input&gt;的value</span></small><br>
      </div>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">append()方法可以用來附加子節點，如果有多個父節點，則來源節點會進行複製。remove()方法可以將自己從父節點移除。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('div').append('&lt;img&gt;'); // 建立&lt;img&gt;附加至所有的&lt;div&gt;</span></small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('div').remove();&nbsp; // 移除所有&lt;div&gt;</span></small><br>
      </div>
<br style="font-family: Courier New,Courier,monospace;">
      <small><span style="font-family: Courier New,Courier,monospace;">像上面的attr()或html()方法，其實都是傳回收集物件本身（XD.each()第一個參數傳入this，最後XD.each()執行結束傳回的就是那個this），所以你可以如下進行鏈狀操作：</span><br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('&lt;img&gt;,&lt;img&gt;')<br>
&nbsp;&nbsp;&nbsp; .attr('src', 'images/caterpillar_small.jpg')<br>
&nbsp;&nbsp;&nbsp; .each(function(element) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // ... 作一些事<br>
&nbsp;&nbsp;&nbsp; });</span></small><br>
      </div>
      <br>
      <small>在將來，若別人想要擴充這個程式庫，可以在他的.js中撰寫：<br>
      </small>
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">(function(XD) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; XD.mth.get = function(index) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // this 參考至收集元素的物件<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this[index];<br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      </span></small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; };</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">})(this.XD);</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;">
      </small><br>
      <small>那麼他就可以這麼使用：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">XD('img').get(0);&nbsp; // 傳回第一個img元素</span></small><br>
      </div>
<br>
      <small>如果你曾經使用過 <a href="http://jquery.com/">jQuery</a>，對於以上的使用模式應該很眼熟，事實上，這邊的封裝與 </small><small><small><big><big><a href="BuildUtilityFunction.html"><small>建立核心公用函式</small></a></big> 中的封裝，都是在模彷 jQuery 建立程式庫的方式，只不過這邊作了一定程度的簡化。就目前完成的.js，這邊命名為gossip-0.2.js，就在這邊找到完整內容：<br>
      </big></small></small>
      <ul>
        <li><small><small><big><a href="samples/js/gossip-0.2.js">gossip-0.2.js</a></big></small></small></li>
      </ul>
      <small><small><big><br>
如果你對jQuery的運作原理有興趣，這個簡化後的檔案可以作為開始，在之後的文件，也會適當地使用這個.js來簡化範例的撰寫。例如，</big></small></small><small><small><big>可以稍微簡化一下 </big></small></small><small><big><a href="ModifyNodes.html"><small>修改文件</small></a></big> 中第一個範例<br>
      </small>
      <ul>
        <li><a href="samples/BuildDOMLibrary-1.html"><small>BuildDOMLibrary-1.html</small></a></li>
      </ul>
      <pre>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta content="text/html; charset=Big5" http-equiv="content-type"&gt;<br>        &lt;script type="text/javascript" src="js/gossip-0.2.js"&gt;&lt;/script&gt;<br>        &lt;script type="text/javascript"&gt;<br>            window.onload = function() {<br>                XD('#add')[0].onclick = function() {<br>                    var imgXD = XD('&lt;img&gt;').attr('src', XD('#src').val());<br>                    imgXD[0].onclick = function() {<br>                        XD(this).remove();<br>                    };<br>                    XD('#images').append(imgXD);<br>                };<br>            };<br>        &lt;/script&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        &lt;input id="src" type="text"&gt;&lt;button id="add"&gt;新增圖片&lt;/button&gt;<br>        &lt;div id="images"&gt;&lt;/div&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <br>
      <small><small><big><br>
可以稍微簡化一下 </big></small></small><small><big><a href="ModifyNodes.html"><small>修改文件</small></a></big> 中第二個範例：<br>
      </small>
      <ul>
        <li><a href="samples/BuildDOMLibrary-2.html"><small>BuildDOMLibrary-2.html</small></a></li>
      </ul>

      
      <pre>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta content="text/html; charset=Big5" http-equiv="content-type"&gt;<br>        &lt;script type="text/javascript" src="js/gossip-0.2.js"&gt;&lt;/script&gt;<br>        &lt;script type="text/javascript"&gt;<br>            window.onload = function() {<br>                var container1XD = XD('#container1');<br>                var container2XD = XD('#container2');                <br>                XD('#image')[0].onclick = function() {<br>                    if(this.parentNode === container1XD[0]) {<br>                        container2XD.append(this);<br>                    }<br>                    else {<br>                        container1XD.append(this);<br>                    }<br>                };<br>            };<br>        &lt;/script&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>        容器一：&lt;div id="container1"&gt;<br>        &lt;img id="image" src=<br>      "http://caterpillar.onlyfun.net/Gossip/images/caterpillar_small.jpg"/&gt;<br>                &lt;/div&gt;&lt;br&gt;<br>        容器二：&lt;div id="container2"&gt;&lt;/div&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <br>
      <small>封裝還不完善，隨著文件的進行，之後還會逐步完善這個程式庫。</small><br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/BuildDOMLibrary.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:28 GMT -->
</html>