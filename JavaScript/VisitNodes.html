<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/VisitNodes.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:25 GMT -->
<head>
























  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>走訪文件</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 走訪文件<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><a href="http://openhome.cc/eGossip/JavaScript/FindingHTMLElements.html">English</a><br>
      </div>
      <small><br>
只要你取得了文件中某個<span style="font-family: Courier New,Courier,monospace;">節點</span>（<a href="http://www.w3schools.com/dom/dom_node.asp"><span style="font-family: Courier New,Courier,monospace;">Node</span></a>），你就可以取得它的父節點、子節點、鄰接節點等，相關的特性有：<br>
      </small>
      <ul>
        <li><small><span style="font-family: Courier New,Courier,monospace;">parentNode可取得父節點</span></small></li>
        <li><small><span style="font-family: Courier New,Courier,monospace;">previousSibling前鄰接節點</span></small></li>
        <li><small><span style="font-family: Courier New,Courier,monospace;">
nextSibling後鄰接節點</span></small></li>
        <li><small><span style="font-family: Courier New,Courier,monospace;">firstChild首個子節點</span></small></li>
        <li><small><span style="font-family: Courier New,Courier,monospace;">lastChild最後一個子節點</span></small></li>
        <li><small><span style="font-family: Courier New,Courier,monospace;">childNodes所有直接子節點</span></small></li>
      </ul>
      <br>
      <small>以</small> <small><a href="W3CDOM.html">W3C DOM 簡介</a> 中的文件為例：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;html&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp; &lt;head&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;title&gt;首頁&lt;/title&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp; &lt;/head&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp; &lt;body&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;h1&gt;Hello!World!&lt;/h1&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href="Gossip/index.html"&gt;學習筆記&lt;/a&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&nbsp;&nbsp;&nbsp; &lt;/body&gt;</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
&lt;/html&gt;</span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small><br>
      </div>
      <br>
      <small>這份HTML文件，假設你使用<span style="font-family: Courier New,Courier,monospace;">document.body取得body節點，假設就是被body變數參考，從body開始，各特性可以取得的節點標示如下</span>（假設如Internet Explorer中</small><small>不考慮換行與縮排的文字節點</small><small>）：<br>
      </small>
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">document&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|-html（body.parentNode）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
|-head（body.previousSibling）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;
|&nbsp;&nbsp;&nbsp;
|-title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|-首頁&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; |<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
|body<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;
|-h1（body.firstNode）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp; |-Hello!World!&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|-a（body.lastNode）<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|-學習筆記&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
      </span></small></div>

      <small><br><span style="font-family: Courier New,Courier,monospace;">如果是body.childNodes，則取得<span style="font-weight: bold;"> <a href="http://www.w3schools.com/DOM/dom_nodelist.asp">NodeList</a> </span>物件，這是一個類似陣列具有索引存取的特性，索引從0開始就是第一個子節點，所以body.childNodes[0]就是h1節點，body.childNodes[1]就是a節點。<br>
      <br>
（NodeList規範的是使用item()搭配索引來取得元素，不過在</span>JavaScript<span style="font-family: Courier New,Courier,monospace;">中，可以直接使用[]搭配索引來取得元素。）<br>
<br>實際上比較不建議透過以上特性來存取元素，因為這會強烈依賴文件結構，一旦調整了文件內容，程式可能就無法運作了。比較常的作法是，如果節點是元素（<a href="http://www.w3schools.com/dom/dom_element.asp">Element</a>），透過元素的<span style="font-weight: bold;">getElementsByTagName()</span>、<span style="font-weight: bold;">getElementById()</span><span style="font-weight: bold;"></span>方法來取得節點。例如若想取得文件中所有的&lt;p&gt;標籤所代表的元素，則可以如下：<br>
      </span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var ps = document.getElementsByTagName('p');</span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>
      <small><span style="font-family: Courier New,Courier,monospace;">
      </span></small><br>
      <small>由於文件中可能不只有一個<span style="font-family: Courier New,Courier,monospace;">&lt;p&gt;標籤，取得的節點也可能不只一個，</span><span style="font-family: Courier New,Courier,monospace;">getElementsByTagName()</span><span style="font-family: Courier New,Courier,monospace;">取得的是NodeList，可依標籤在文件中的順序使用索引取得對應節點。例如，document.getElementsByTagName('p')[0]取得的就是文件中第一個出現的&lt;p&gt;標籤對應的節點。<br>
      <br>
如果標籤上定義有id屬性，則可以使用getElementById()來取得元素。例如文件中有個&lt;div&gt;：<br>
      </span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;div id="console"&gt;Console here&lt;/div&gt;</span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>
      <br>
      <small>則可以透過以下取得：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var console = document.getElementById('console');</span></small><br>
      </div>

      <br>
      <small style="font-family: Courier New,Courier,monospace;">id在文件中基
本上應該是獨一無二的，如果文件中出現重複的id，那getElementById()取得的，會是文件中第一個符合的元素。只要是元素
（Element），都會有getElementsByTagName()、getElementById()，透過這些方法取得的元素，就是該元素下的
子元素。例如文件有以下的內容：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;div id="test"&gt;</span></small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;div&gt;Test 1 Here&lt;/div&gt;</span></small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;div&gt;Test 2 Here&lt;/div&gt;</small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;/div&gt;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
則以下可以取得Test 1 Here的內容：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var testDiv = document.getElementById('test');</span></small><br style="font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var test1DivHtml = testDiv.getElementsByTagName('div')[0].innerHTML;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br><span style="font-weight: bold;">
innerHTML</span>可以取得標籤內含之</small><small>HTML</small><small style="font-family: Courier New,Courier,monospace;">，以字串形態傳回，innerHTML不是標準特性，不過幾乎所有瀏覽器都支援它，事實上，</small><small style="font-weight: bold;">HTML 5</small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">已將innerHTML納入標準</span>。<br>
      <br>
如果是HTMLDocument，則還會有個<span style="font-weight: bold;">getElementsByName()</span>方
法，只要標籤上有設定name屬性，就可以使用這個方法來取得對應元素。HTML文件中document就是HTMLDocument，所以就可以使用這
個方法。標籤的name屬性值可以重複，所以getElementsByName()取得的不只一個元素，會以NodeList收集符合的元素。<br>
      <br>
取得某個節點或元素，自然會想要知道有關這個節點或元素的一些資訊。例如方才使用innerHTML取得元素內含的</small><small>HTML</small><small style="font-family: Courier New,Courier,monospace;">就是一個例子。另外，經常地，會想要得知元素的屬性為何，例如取得最上面列出的HTML文件中，&lt;a&gt;的href屬性：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var href = document.getElementsByTagName('a')[0].href;</span></small><br>
      </div>

      <br>
      <small>如果要以標準的作法，則可以透過<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">getAttribute()</span>方法來取得標籤的屬性值。例如：</small><br>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var href = document.getElementsByTagName('a')[0].getAttribute('href');</span></small><br>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small></div>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"><br>
      </span>使用標準的作法，好處是處理像class屬性這樣的東西比較方便。例如有個標籤：<br>
</small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;div id="console" class="demo"&gt;DEMO&lt;/div&gt;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
      <br>
</span>如果要用特性的方式取得，由於class是保留字，必須改用<span style="font-weight: bold;">className</span>：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var clzName = document.getElementById('console').className;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">
      <br>
      </span>但使用標準作法，在</small><small>Firefox</small><small style="font-family: Courier New,Courier,monospace;">中可以這麼寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var clzName = document.getElementById('console').getAttribute('class');</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
不過，其實getAttribute()接受的名稱，存在著瀏覽器差異性，在</small><small>Internet Explorer</small><small style="font-family: Courier New,Courier,monospace;">中以上是沒作用的，而必須寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var clzName = document.getElementById('console').getAttribute('className');</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
&lt;label&gt;的for屬性也是類似，由於for是</small><small>JavaScript</small><small style="font-family: Courier New,Courier,monospace;">的關鍵字，使用特性取得時，必須改用<span style="font-weight: bold;">htmlFor</span>：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var htmlFor = document.getElementById('someLabel').htmlFor;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>但使用標準方法的話，在</small><small>Firefox</small><small style="font-family: Courier New,Courier,monospace;">中可以這麼寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var htmlFor = document.getElementById('someLabel').getAttribute('for');</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
      </small><small>但在Internet Explorer中仍必須：</small><small style="font-family: Courier New,Courier,monospace;"><br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var htmlFor = document.getElementById('someLabel').getAttribute('htmlFor');</span></small><br>
      </div><br>
<small style="font-family: Courier New,Courier,monospace;"><span style="font-family: Courier New,Courier,monospace;">要</span>以特性方式要取得</small><small><span style="font-family: Courier New,Courier,monospace;">標籤</span></small><small style="font-family: Courier New,Courier,monospace;">設置的屬性，特性名稱要注意大小寫的問題，通常會是駝峰式命名。例如要取得</small><small>HTML</small><small style="font-family: Courier New,Courier,monospace;">中設置的屬性如cellspacing、colspan、frameborder、maxlength、readonly、rowspan、tabindex、usemap等，要透過</small><small>DOM</small><small style="font-family: Courier New,Courier,monospace;">的特性取得則必須是</small><small style="font-family: Courier New,Courier,monospace;">cellSpacing、colSpan、frameBorder、maxLength、readOnly、rowSpan、tabIndex、useMap等。<br>
      <br>
若使用getAttribute()則通常不用注意大小寫。例如若要取得某個&lt;input&gt;元素的readonly屬性，則使用getAttribute('readonly')、</small><small style="font-family: Courier New,Courier,monospace;">getAttribute('readOnly')、</small><small style="font-family: Courier New,Courier,monospace;">getAttribute('Readonly')等任意大小寫組合都是可以的。</small><br>
      <small style="font-family: Courier New,Courier,monospace;"><br>float特性是</small><small>JavaScript</small><small style="font-family: Courier New,Courier,monospace;">的保留字（</small><small style="font-family: Courier New,Courier,monospace;">雖然目前沒有使用</small><small style="font-family: Courier New,Courier,monospace;">），所以標準使用了cssFloat名稱，在</small><small>Internet Explorer</small><small style="font-family: Courier New,Courier,monospace;">中則是使用styleFloat。<br>
      <br>
或許存取屬性最常見的，就是取得表單中某個&lt;input&gt;標籤中的value屬性。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;input id="username" name="user" value="caterpillar"&gt;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
你可以透過以下來取得欄位值：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var username = document.getElementById('username').value;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
有個初學者常犯的錯誤，例如，想取得HTML文件中&lt;a&gt;標籤間的文字，卻撰寫如下：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var text = document.getElementsByTagName('a')[0].value;</span></small><br>
      </div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
這是錯的！&lt;a&gt;上面並沒有value屬性，對應的物件上也沒有value特性，而且要記得，文字也是一個節點，所以，你要先取得文字節點，也就是</small><small style="font-family: Courier New,Courier,monospace;">&lt;a&gt;的子節點，</small><small style="font-family: Courier New,Courier,monospace;">再使用data（定義在Text）或nodeValue（定義在Node）取得文字本身：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var a = </span></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">document.getElementsByTagName('a')[0];<br>
var text = a.firstChild.data;<br>
      </small></div>
      <small style="font-family: Courier New,Courier,monospace;"><br>
<br>
      <br>
      <br>
      <span style="font-weight: bold;">
      </span></small>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/VisitNodes.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:25 GMT -->
</html>