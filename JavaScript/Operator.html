<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/Operator.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
<head>






















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>運算子</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 運算子<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
<script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><a href="http://openhome.cc/eGossip/JavaScript/Operators.html">English</a><br>

      </div>
      <small><br>
對於運算子的使用，最主要是要注意自動型態轉換的問題，其中有關<span style="font-family: Courier New,Courier,monospace;">+、-、*、/以及==及===（!=與!==）</span>的說明，在 </small><a href="TypeConversion.html"><small>型態轉換</small></a><small> 有先作過一些說明。<br>
      <br>
當+兩邊的運算元有一個是字串時，就會作字串的串接，而整個運算式中有數字也有字串時，要注意運算順序。例如：</small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; 1 + 2 + '3';<br>
</span>33<span style="font-weight: bold;"><br>
js&gt; '1' + 2 + 3;<br>
            </span>123<span style="font-weight: bold;"><br>
js&gt; '1' + (2 + 3);<br>
            </span>15<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      
      </table>



      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">第一個式子是先作1+2的運算，結果再與'3'作字串的串接，得到'33'的字串；第二個式子是先作字串的串接，得到'12'，再與3作字串的串接，得到'123'的字串；不確定的話，可如第三個式子，使用()定義優先運算順序。</span><br></small><br>
      <small>在比較運算上，除了 </small><small><big><a href="TypeConversion.html"><small>型態轉換</small></a></big> </small><small>中提到的使用==、===、!=、!==之，還可以使用&gt;、&gt;=、&lt;、&lt;=，在JavaScript中，這些運算子不僅可用在比較數字，還可以用來比較字串，<span style="font-weight: bold;">如果運算子兩邊都是字串，則逐字元依Unicode編碼數值進行比較</span>。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">但如果</span></small><small style="font-family: Courier New,Courier,monospace;">&gt;、&gt;=、&lt;、&lt;=兩邊一個是字串，一個是數字，那麼型態轉換又有可能自動發生。如果字串的部份代表數字，則會轉換為數字，再與另一數字進行比較。如果字串的部份不代表數字，則會被轉換為NaN，與另一數字比較的結果自然就是false。</small><br>
      <small><br>
      </small><small>&gt;、&gt;=、&lt;、&lt;=兩邊其實可用於物件，</small><small>如果物件有可能轉換為數字，視物件有無<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">valueOf()</span>方法，且傳回數字，則以傳回的數字相比。例如<span style="font-family: Courier New,Courier,monospace;">Date</span>就是一個例子：</small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var date = new Date();<br>

js&gt; date.valueOf();<br>

</span>1289293581594<span style="font-weight: bold;"><br>

js&gt; date &gt; 1289293581594;<br>

            </span>false<span style="font-weight: bold;"><br>

js&gt; date &gt; 1289293581593;<br>

            </span>true<span style="font-weight: bold;"><br>

js&gt; date &gt; new Date();<br>

            </span>false<span style="font-weight: bold;"><br>

js&gt; new Date() &gt; date;<br>

            </span>true<br>
            <span style="font-weight: bold;">js&gt; var obj = {</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; valueOf : function() {</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 100;</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br style="font-weight: bold;">
            <span style="font-weight: bold;">&nbsp; &gt; };</span><br>
            <span style="font-weight: bold;">js&gt; 1 + obj;</span><br>
101<br>
<span style="font-weight: bold;">
js&gt; 1 &gt; obj;<br>
</span>false<span style="font-weight: bold;"><br>
            </span></span></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;"><span style="color: rgb(255, 255, 255);">
js&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      
      </table>




      <small><small><br>
      <big><span style="font-family: Courier New,Courier,monospace;">正如上例所示，其它運算式若需轉為數值，也是透過valueOf()取得值</span>。</big><br>
<br>
      </small><span style="font-family: Courier New,Courier,monospace;">預設valueOf()會傳回toString()的傳回值。如果你沒有重新定義valueOf()，就會使用toString()的傳回值作比較。</span></small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">










        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var o1 = {};<br>
js&gt; o1.valueOf();<br>
</span>[object Object]<span style="font-weight: bold;"><br>
js&gt; var o2 = {};<br>
js&gt; o2;<br>
            </span>[object Object]<span style="font-weight: bold;"><br>
js&gt; o1 &gt;= o2;<br>
            </span>true<span style="font-weight: bold;"><br>
js&gt; o1 &gt; o2;<br>
            </span>false<span style="font-weight: bold;"><br>
js&gt; o1 == o2;<br>
            </span>false<br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">
js&gt; <br>
</span></span></small></td></tr></tbody>
      
      
      
      </table>





      <small><small><small><br>
</small></small>注意，<span style="font-family: Courier New,Courier,monospace;">==</span>用來比較物件時，是比較是否參考同一物件。</small><br>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">如果你要測試某個物件上是否有某個特性，且要傳回true、false的結果，則可以使用in運算子。例如：</span></small><br>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">











        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var obj = { x : 10 };<br>
js&gt; 'x' in obj;<br>
</span>true<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      
      
      
      </table>






      <small><small><small><small><br>
</small></small></small>之後還會詳細介紹物件，在這邊也可以看到，物件上的特性名稱，實際上是個字串。<br>
      <br>
如果你想要得知某個物件是否由哪個建構式（Constructor，或所謂的class）所產生，則可以使用<span style="font-family: Courier New,Courier,monospace;">instanceof</span>運算式。例如：<br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; [] instanceof Array;<br>
</span>true<span style="font-weight: bold;"><br>
js&gt; [] instanceof Object;<br>
            </span>true<span style="font-weight: bold;"><br>
js&gt; [] instanceof Date;<br>
            </span>false<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>
      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">對於沒有繼承關係的，instanceof會傳回false。<br>
      <br>
typeof也用來測試物件型態，傳回值是字串，對於基本資料型態，數值會傳回'number'、字串會傳回'string'、布林會傳回
'boolean'、對於Function實例會傳回'function'、對於undefined會傳回'undefined'、對於其它物件一律傳回
'object'，包括null也是傳回'object'。</span></small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">

<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; typeof 1;<br>
</span>number<span style="font-weight: bold;"><br>
js&gt; typeof '';<br>
            </span>string<span style="font-weight: bold;"><br>
js&gt; typeof true;<br>
            </span>boolean<span style="font-weight: bold;"><br>
js&gt; typeof function() {};<br>
            </span>function<span style="font-weight: bold;"><br>
js&gt; typeof undefined;<br>
            </span>undefined<span style="font-weight: bold;"><br>
js&gt; typeof {};<br>
            </span>object<span style="font-weight: bold;"><br>
js&gt; typeof null;<br>
            </span>object<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>

      <small style="font-family: Courier New,Courier,monospace;"><br>
      </small><small><span style="font-family: Courier New,Courier,monospace;">&amp;&amp;
與
||大家都知道用來判斷AND與OR是否成立，而且具有捷徑運算，例如&amp;&amp;只要左運算元可以判斷為不成立，則&amp;&amp;結果直
接不成立，不用判斷右運算元，而||只要左運算元判斷為成立，就直接判斷||結果為成立，不用再判斷右運算元。</span><br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">不過，<span style="font-weight: bold;">&amp;&amp;或||其傳回值並非true或false</span>，而是在判斷式整個可以確認是否成立時，傳回當時的運算元。例如：</span></small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">


<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; 'left' &amp;&amp; 'right';<br>
</span>right<span style="font-weight: bold;"><br>
js&gt; 0 &amp;&amp; 'right';<br>
            </span>0<br>
js&gt; 'left' &amp;&amp; 0;<br>
0<br>
            <span style="font-weight: bold;">js&gt;</span></span></small></td></tr></tbody>
      </table>
      <small><small style="font-family: Courier New,Courier,monospace;"><br>
      </small><span style="font-family: Courier New,Courier,monospace;">在
上面第一個例子中，左運算元非空字串，會當作結果成立，所以再判斷右運算元，也非空字串，所以判斷整個&amp;&amp;成立，由於是停在第二個運算
元，所以傳回'right'。第二個例子，由於0會被當作不成立，此時不用判斷右運算元，就可判斷整個&amp;&amp;運算不成立，所以直接傳回0。
第三個例子，由於</span></small><small><span style="font-family: Courier New,Courier,monospace;">左運算元非空字串，會當作結果成立，所以再判斷右運算元為0，所以當作不成立，整個&amp;&amp;運算此時確認不成立，傳回右運算元。</span><br style="font-family: Courier New,Courier,monospace;">
      <br style="font-family: Courier New,Courier,monospace;">
      <span style="font-family: Courier New,Courier,monospace;">||的例子則如下：</span></small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">



<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; 'right' || 'left';<br>
</span>right<span style="font-weight: bold;"><br>
js&gt; 0 || 'left';<br>
            </span>left<span style="font-weight: bold;"><br>
js&gt; 'right' || 0;<br>
            </span>right<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>

      <small><small><small style="font-family: Courier New,Courier,monospace;"><br>
</small></small>這個特性很有用，例如，想要在某個值存在時直接使用，而不存在時提供預設值，則可以如下：</small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function doSome(arg) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var option = arg || 'default';<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(option);<br>
&nbsp; &gt; }<br>
js&gt; doSome();<br>
</span>default<span style="font-weight: bold;"><br>
js&gt; doSome('caterpillar');<br>
            </span>caterpillar<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>


      <small><small><small><small style="font-family: Courier New,Courier,monospace;"><br>
</small></small></small>上面用到了函式作為範例，之後還會詳細說明，像是如果函式參數很多時，還可以合併物件的方式提供預設值。上例其實就相當於使用<span style="font-family: Courier New,Courier,monospace;">?:</span>運算子的結果：</small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">





<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function doSome(arg) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var option = arg ? arg : 'default';<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(option);<br>
&nbsp; &gt; }<br>
js&gt; doSome();<br>
</span>default<span style="font-weight: bold;"><br>
js&gt; doSome('caterpillar');<br>
            </span>caterpillar<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>



      <br>
      <small style="font-family: Courier New,Courier,monospace;">兩者可以達到相同的效果，不過慣例上還是使用||的方式。<br>
      <br>
void運算子放在任何資料或運算式之前，都會產生undefined，這是取得undefined的另一個方式，在一些無法直接在程式中寫undefined來取得undefined值的環境中，可以使用void來取得。例如：</small><small><br>
      </small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">






<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; void 0;<br>
js&gt; typeof void 0;<br>
</span>undefined<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>




      <br>
      <br>
      <br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/Operator.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
</html>