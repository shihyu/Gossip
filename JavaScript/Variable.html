<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/Variable.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
<head>
























  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>變數</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">JavaScript Essence: 變數<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
       <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;">
      <div style="text-align: right;"><small><span style="font-family: Courier New,Courier,monospace; color: black;"></span></small><a href="http://openhome.cc/eGossip/JavaScript/Variables.html">English</a><small><span style="font-family: Courier New,Courier,monospace; color: black;"><br>
      </span></small>
      <small><span style="font-family: Courier New,Courier,monospace; color: black;"></span></small>
      <small><span style="font-weight: bold;">
      </span></small></div>
      <small><br>
在程式語言的分類中，依據是在編譯時期或執行時期進行型別檢查，可區分為<span style="font-weight: bold;">靜態（Static-type）語言</span>與<span style="font-weight: bold;">動態（Dynamic-type）語言</span>。<br>
      <br>
Java、C/C++等皆為靜態語言，其變數必然帶有型態。以Java為例：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">int number = 10;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String id = "caterpillar";</span></small><br>
      <small><span style="font-weight: bold;"></span></small></div>
      <small><span style="font-weight: bold;"><br>
      </span><span style="font-family: Courier New,Courier,monospace;">在上例中，number變數本身帶有int型態資訊，而id變數帶有String型態資訊，在指定時，變數型態資訊與值的型態資訊必須符合，否則會發生編譯失敗。例如以下就會因型態不符而編譯失敗：<br>
      </span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">int number = 10;</span></span></small><br style="font-weight: bold;">
      <small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">number = "caterpillar";</span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>
      <small><span style="font-family: Courier New,Courier,monospace;"><br>
      </span><span style="font-weight: bold;">JavaScript則為動態語言</span>，其變數本身使用者無需宣告型態，型態資訊僅在值或物件本身，變數只用來作為取得值或物件的參考。例如：<br style="font-weight: bold;">
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var some = 10;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">some = 'caterpillar';</span></small><br>
      </div>
      <small><span style="font-family: Courier New,Courier,monospace;"></span><span style="font-weight: bold;"><br>
      由於變數本身不帶型態資訊，</span></small><small><span style="font-weight: bold;">同一個變數可以指定不同型態的值</span>，</small><small>實際操作時，是在執行時期才透過變數來參考至物件或值，才得知物件或值上有操作之方法。<br>
      <br>
靜態語言由於變數本身帶有型態資訊，好處就是編譯時期，可由編譯器確認變數與實際參考之值是否符合，可在編譯時期就檢查出許多型態指定不符的錯誤。相對地，動態語言就必須等到執行時期，才能發現所操作的對象並非預期型態之錯誤，這是靜態語言優點動態語言的地方。<br>
      <br>
然而，靜態語言宣告變數時，必須同時宣告型態，因而容易造成語法上的冗長。例如在Java中，若要使用同一陣列儲存多種物件，則一個例子如下：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">Object[] objects = {"caterpillar", new Integer(100), new Date()};</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">String name = (String) objects[0];</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">Integer score = (Integer) objects[1];</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">Data time = (Date) objects[2];</span></small><br>
      </div>
      <small><br>
反觀JavaScript若要達到相同目的，所需的程式碼較為簡短。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var objects = ['caterpillar', 100, new Date()];</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var name = objects[0];</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var score = objects[1];</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">var time = objects[2];</span></small><br>
      </div>
      <small><span style="font-weight: bold;"><br>
      </span>就程式撰寫速度上，動態語言著實有著比靜態語言快速的優點。<br>
      <br>
再回頭看看JavaScript變數宣告的討論。在JavaScript中要宣告變數，可以使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">var</span>來宣告。這是先前一直都有看到的，事實上，你也可以不用<span style="font-family: Courier New,Courier,monospace;">var</span>宣告，直接指定某個名稱的值，該名稱會自動成為全域範圍，其實也就是在<span style="font-weight: bold;">全域（</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">global</span><span style="font-weight: bold;">）</span>物件上建立特性。例如：</small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">






        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; some = 10;<br>
</span>10<span style="font-weight: bold;"><br>
js&gt; some;<br>
            </span>10<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      
      </table>

      <small><br>這很方便，也很危險，因為是在全域物件上建立特性。全域變數若在瀏覽器中，就是<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">window</span>物件，在 </small><small> <a href="http://www.mozilla.org/rhino/shell.html">Rhino Shell</a> 中，也可以在全域範圍中使用<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">this</span>來取得。例如： </small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; this.some;<br>
</span>10<span style="font-weight: bold;"><br>
            </span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; this;</span></span></small><br>
            <small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);">[object global]<span style="font-weight: bold;"><br>
js&gt;</span></span></small></td></tr></tbody>
      </table>
      <small><br><span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">使用var所宣告的變數，作用範圍是在當時所在環境，不使用var直接指定值而建立的變數，則是全域物件上的一個特性，也就是俗稱的全域範圍。</span><span style="font-family: Courier New,Courier,monospace; color: red;"><span style="color: black;">你可以先以這樣的觀念理解，如果你寫下：<br>
      </span></span></small>
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace; color: red;"><span style="color: black;"><span style="font-weight: bold;">some = 10;</span></span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace; color: red;"><span style="color: black;"></span></span></small></div>

      <small><br>
執行時可先以直譯器會直接這麼作來理解：<br>
</small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">this.some = 10;</span></small><br>
      </div>
      <small><br><span style="font-family: Courier New,Courier,monospace;">
例如，可觀察以下在函式中使用var與不使用var宣告的變數之差別：</span></small><small><br></small>
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function func() {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var x = 10;<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; y = 20;<br>
&nbsp; &gt; }<br>
js&gt; func();<br>
js&gt; x;<br>
</span>js: "&lt;stdin&gt;", line 12: uncaught JavaScript runtime exception: ReferenceError: "x" is not defined.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:12<span style="font-weight: bold;"><br>
            <br>
js&gt; y;<br>
            </span>20<span style="font-weight: bold;"><br>
js&gt; this.y;<br>
            </span>20<br>
</span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt;</span></span></small><br>
<small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>

      <small><br>
      <span style="font-family: Courier New,Courier,monospace;">x在函式中使用var宣告，所以在函式外不可見，但y並非使用var宣告，所以y是全域物件上的特性，在函式外依舊可見，俗稱全域範圍。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">如果你</span>在全域使用var宣告變數，也相當於在全域物件上建立特性。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var x = 10;<br>
js&gt; this.x;<br>
</span>10<span style="font-weight: bold;"><br>
js&gt;</span></span></small></td></tr></tbody>
      </table>
      <small><br>
如果全域與區域中有同名的變數，則區域會暫時覆蓋全域：</small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">










        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var x = 10;<br>
js&gt; function func() {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var x = 20;<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(x);<br>
&nbsp; &gt; }<br>
js&gt; func();<br>
</span>20<span style="font-weight: bold;"><br>
js&gt; print(x);<br>
            </span>10<span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      
      </table>

      <small><br>
      </small><small><span style="font-family: Courier New,Courier,monospace;">你可以使用<span style="font-weight: bold;">delete</span>來刪除物件上的特性。由於未使用var宣告的變數，會是全域物件上的特性，就某些意義來說，對未使用var宣告的變數使用delete，就相當於所謂刪除變數。例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">










        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; a = 20;<br>
</span>20<span style="font-weight: bold;"><br>
js&gt; delete a;<br>
            </span>true<span style="font-weight: bold;"><br>
js&gt; a<br>
            </span>js: "&lt;stdin&gt;", line 7: uncaught JavaScript runtime exception: ReferenceError: "a" is not defined.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:7<br>
</span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; this.a;<br>
js&gt;</span></span></small><small><span style="font-family: Courier New,Courier,monospace;"></span></small>
</td></tr></tbody>
      </table>

      <small><br><span style="font-family: Courier New,Courier,monospace;">注意，上例中，this.a的結果是undefined，不過在</span>Rhino Shell<span style="font-family: Courier New,Courier,monospace;">中，undefined不會顯示任何結果。delete會傳回true表示特性刪除成功，false表示無法刪除。<span style="font-weight: bold;">使用var宣告的變數就無法用delete刪除。</span>例如：</span></small><small><br></small>
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">











        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var b = 10;<br>
js&gt; delete b;<br>
</span>false<span style="font-weight: bold;"><br>
js&gt; </span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small><br>
</td></tr></tbody>
      </table>


<br>
      <small style="font-family: Courier New,Courier,monospace;">你可以重複使用var宣告變數，但不會覆蓋原有的指定值。例如：</small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">












        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; var x = 10;<br>
js&gt; var x;<br>
js&gt; x<br>
</span>10<span style="font-weight: bold;"></span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small><br>
</td></tr></tbody>
      
      </table>



      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">要注意的是，var宣告的變數是當時作用範圍中整個都是有作用的，並沒有所謂區塊範圍。例如：</span></small><small><br></small>
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">













        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function func() {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; if(true) {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var x = 10;<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; return x;<br>
&nbsp; &gt; }<br>
js&gt; func();<br>
            </span>10<span style="font-weight: bold;"><br>
js&gt;</span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small><br>
</td></tr></tbody>
      
      </table>




      <br>
      <small><span style="font-family: Courier New,Courier,monospace;">var宣告的變數是當時作用範圍中整個都是有作用的，這會產生令人驚奇的結果。</span></small><small style="font-family: Courier New,Courier,monospace;">例如下例不意外的，會產生直譯錯誤：</small><small><br></small>
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function func() {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);<br>
&nbsp; &gt; }<br>
js&gt; func();<br>
</span>js: "&lt;stdin&gt;", line 210: uncaught JavaScript runtime exception: ReferenceError:<br>
"m" is not defined.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:210 (func)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at &lt;stdin&gt;:210<br>
            <span style="font-weight: bold;"><br>
js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small><br>
</td></tr></tbody>
      
      
      </table>







      <br>

      <small><span style="font-family: Courier New,Courier,monospace;">但下例中並不會直譯錯誤：</span></small><small></small>
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">

















        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">js&gt; function func() {<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);<br>
&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; var m = 10;<br>
            </span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&nbsp; &gt;&nbsp;&nbsp;&nbsp;&nbsp; print(m);</span></span></small><br>
            <small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&nbsp; &gt; }<br>
js&gt; func();<br>
            </span>undefined<br>
10<br>
            <span style="font-weight: bold;">js&gt;</span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;"></span></span></small></td></tr></tbody>
      </table>
      <br>
      <small style="font-family: Courier New,Courier,monospace;">所
有var宣告的變數，在整個函式區塊中都是可見的，因而在上例中print()時是可找到m特性，只不過
是undefined的值。<br>
      <br>
      </small>
      <small><span style="font-family: Courier New,Courier,monospace;"></span>如果你有興趣，</small><small><big><a href="ScopeChain.html"><small>範圍鏈（Scope chain）</small></a></big> 會</small><small>深入說明一件事，</small><small><span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">使用var所宣告的變數，會是當時執行環境（</span><span style="font-weight: bold; color: red;">Execute context</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">）中呼叫物件（</span><span style="font-weight: bold; color: red;">call object</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold; color: red;">）上的特性，</span><span style="font-family: Courier New,Courier,monospace; color: black;">也因此<span style="font-weight: bold;">沒有所謂區塊範圍</span>。<br>
      <br>
      </span></small><small><span style="font-weight: bold;"><br>
      </span></small>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/JavaScript/Variable.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:16:22 GMT -->
</html>