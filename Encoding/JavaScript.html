<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Encoding/JavaScript.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:02 GMT -->
<head>





















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>JavaScript 編碼基礎</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Encoding Gossip: JavaScript 編碼基礎<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </script></center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>要在瀏覽器中執行JavaScript，可在一個HTML/XHTML檔案中撰寫<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;script&gt;&lt;/script&gt;</span>，並於兩個標籤間撰寫JavaScript程式碼。例如：<br>
      </small>
      
      <ul>
<li><a href="samples/JavaScript-1.html"><small>JavaScript-1.html</small></a><br>
        </li>
      </ul>

      
      
      <pre>&lt;script&gt;<br>    var name = prompt('輸入你的名稱');<br>    alert('哈囉！ ' + name + '!');<br>&lt;/script&gt;</pre>
      <br>
      <small>這個簡單的網頁會出來一個對話框，你可以在當中輸入任意字元，即使輸入「王大&#29319;」也可以正確在下一個警示方塊中顯示，這是因為</small><small>JavaScript在內部是使用Unicode處理字元，實作上採用UTF-8，輸入的接收或警示方塊的訊息顯示，都是以Unicode處理。<br>
      <br>
如果將JavaScript儲存於.js檔案中，並在HTML中如下載入.js檔案：<br>
      </small>
      <ul>
<li><a href="samples/JavaScript-2.html"><small>JavaScript-2.html</small></a><br>
        </li>
      </ul>

      <small><span style="font-family: Courier New,Courier,monospace;"></span></small>
      
      <pre>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;script type="text/javascript" src="js/JavaScript-2.js"&gt;&lt;/script&gt;<br>	&lt;meta http-equiv="Content-Type" content="text/html; charset=Big5"&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;<br></pre>

      <small><span style="font-family: Courier New,Courier,monospace;"><br></span></small><br>
      <small>在這邊要注意編碼的問題，瀏覽器會假設載入的.js編碼與HTML網頁編碼相同。如果你的.js檔案與HTML編碼不同，JavaScript中非ASCII相容字元部份就會出現亂碼。例如，如果你的.js如下：<br>
      </small>
      <pre>alert('測試');<br></pre>
      <small><br>
若這個.js檔案是Big5編碼，則會顯示：<br>
      <img style="width: 300px; height: 180px;" alt="" src="images/JavaScript-1.png"><br>
      <br>
如果.js檔案是UTF-8編碼，則會顯示：<br>
      <img style="width: 298px; height: 181px;" alt="" src="images/JavaScript-2.png"><br>
      <br>
      </small><small>如果你的.js是UTF-8編碼，而網頁是Big5<span style="font-family: Courier New,Courier,monospace;">，則可以在&lt;script&gt;上使用charset指定</span>.js的編碼為UTF-8：<span style="font-family: Courier New,Courier,monospace;"><br>
      </span></small>
      
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;script type="text/javascript" charset="UTF-8" src="js/JavaScript-2.js"&gt;&lt;/script&gt;</span></span></small><br>
      <small><span style="font-family: Courier New,Courier,monospace;"></span></small></div>

      <small><span style="font-family: Courier New,Courier,monospace;"><br></span>如此，瀏覽器才會知道以UTF-8載入.js檔案，才可以正確顯示中文，只要你的JavaScript程式中撰寫的字串，可以正確地被執行環境載入執行，那麼在操作DOM物件相關特性（Properties）時，就可以正確地顯示字串，無論原本的HTML網頁是什麼編碼。<br>
      <br>
舉例來說，若你有個UTF-8的.js檔案：<br>
      </small>
      <pre>window.onload = function() {<br>    var name = '王大&#29319;';<br>    document.getElementById('input1').value = name;<br>    document.getElementById('span1').innerHTML = name;<br>};<br></pre>
      <br>
      <small>雖然這當中的「&#29319;」字，不是Big5範圍內的編碼，但Big5網頁中載入後：<br>
      </small>
      <pre>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;script type="text/javascript" <span style="font-weight: bold;">charset="UTF-8"</span><br>            src="js/JavaScript-3.js"&gt;&lt;/script&gt;<br>    &lt;meta http-equiv="Content-Type" content="text/html; <span style="font-weight: bold;">charset=Big5</span>"&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;<br>     欄位：&lt;input id="input1" type="text"&gt;&lt;br&gt;<br>     &lt;span id="span1"&gt;&lt;/span&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <br>
      <small>也是可以正確地顯示出「王大&#29319;」：</small><br>
      <img style="width: 225px; height: 70px;" alt="" src="images/JavaScript-3.png"><br>
      <small>別以為可以這麼撰寫並將HTML儲存為Big5：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;html&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; &lt;head&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript"&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; window.onload = function() {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var name = <span style="color: red;">'王大&#29319;'</span>;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('input1').value = name;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('span1').innerHTML = name;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;/script&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;meta http-equiv="Content-Type" content="text/html; charset=Big5"&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; &lt;/head&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; &lt;body&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp; 欄位：&lt;input id="input1" type="text"&gt;&lt;br&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp; &lt;span id="span1"&gt;&lt;/span&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; &lt;/body&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;/html&gt;</small><br>
      </div>
      <br>
      <small>無論你的編輯器是否會對「&#29319;」字提出無法以Big5儲存的警告，就算編輯器無聲無息地儲存了檔案，實際上原始碼已經是：<br style="font-weight: bold;">
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;html&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp; &lt;head&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript"&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; window.onload = function() {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var name = <span style="color: red;">'王大?'</span>;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('input1').value = name;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('span1').innerHTML = name;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;/script&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;meta http-equiv="Content-Type" content="text/html; charset=Big5"&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp; &lt;/head&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp; &lt;body&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp; 欄位：&lt;input id="input1" type="text"&gt;&lt;br&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp; &lt;span id="span1"&gt;&lt;/span&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp; &lt;/body&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;/html&gt;</span></small><br>
      </div>
      <br>
      <small>在 </small><a href="Big5Unicode.html"><small>Big 5 </small><small>網頁難字</small></a>
      <small>中談過可以在HTML中使用實體編號來解決Big5難字問題，也許你會想到這麼撰寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;html&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &lt;head&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript"&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; window.onload = function() {</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var name = <span style="color: red;">'&amp;#29319'</span>;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('input1').value = name;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.getElementById('span1').innerHTML = name;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &lt;/script&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &lt;meta http-equiv="Content-Type" content="text/html; charset=Big5"&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &lt;/head&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &lt;body&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; 欄位：&lt;input id="input1" type="text"&gt;&lt;br&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp; &lt;span id="span1"&gt;&lt;/span&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp; &lt;/body&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;/html&gt;</small><br>
      </div>

      <br>
      <small>不過這會使得瀏覽器如下顯示：<br>
      <img style="width: 221px; height: 68px;" alt="" src="images/JavaScript-4.png"><br>
      <span style="font-family: Courier New,Courier,monospace;">innerHTML</span>特性是個較特別的特性，指定給它的字串會被當作</small><small>HTML</small><small>進行剖析，但其它DOM特性就不會將字串視為HTML了，很可惜地，JavaScript的核心API中，<span style="font-family: Courier New,Courier,monospace;">String也沒有escapeHTML或unescapeHTML()</span>之類的方法。<br>
      <br>
一個投機的方式，就是從<span style="font-family: Courier New,Courier,monospace;">innerHTML</span>下手，既然傳給<span style="font-family: Courier New,Courier,monospace;">innerHTML</span>的字串被當作HTML解釋了，而且也正確顯示出字元了，這表示在JavaScript執行環境中，它已經是個正確地Unicode字串了，那就<span style="font-family: Courier New,Courier,monospace;">從innerHTML再取回字串：<br>
      </span></small>
      <ul>
        <li><a href="samples/JavaScript-4.html"><small>JavaScript-4.html</small></a><br>
        </li>
      </ul>
      <pre>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;script type="text/javascript"&gt;<br>        window.onload = function() {<br>            var name = '&amp;#29319';<br>			document.getElementById('span1').innerHTML = name;<br>            document.getElementById('input1').value = <br>			       document.getElementById('span1').innerHTML;<br>            alert(document.getElementById('input1').value);<br>        };<br>    &lt;/script&gt;<br>    &lt;meta http-equiv="Content-Type" content="text/html; charset=Big5"&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;<br>     欄位：&lt;input id="input1" type="text"&gt;&lt;br&gt;<br>     &lt;span id="span1"&gt;&lt;/span&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;<br></pre>
      <br>
      <small>這個程式還順便從輸入欄位取得最後的字串結果，結果也是顯示正確的字元：<br>
      <img style="width: 291px; height: 282px;" alt="" src="images/JavaScript-5.png"><br>
      </small><small><br>
只要能正確在瀏覽器中顯示字元，透過DOM特性取得的就會是正確的字元，無論是哪種網頁編碼。</small><br>
      <br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Encoding/JavaScript.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:03 GMT -->
</html>