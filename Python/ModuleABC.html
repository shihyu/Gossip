<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Python/ModuleABC.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
<head>








  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>簡介模組</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Python Gossip: 簡介模組</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>你可以撰寫一個純文字檔案，建議副檔名為<span style="font-weight: bold;">.py</span>，在當中撰寫Python程式碼：<br></small><ul><li><small>hello.py</small></li></ul><pre>print('Hello!Python!')</pre><br><small>接著如下執行指令載入指令稿直譯並執行：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;python hello.py</span><br>Hello!Python!</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>



<br><small>如果你想取得命令列引數（Command line argument），則可以使用<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">sys.argv</span>，例如：<br></small><ul><li><small>hello.py</small></li></ul><pre>import sys<br>print('Hello!' + sys.argv[1] + '!')</pre><br><small>要取得命令列引數，必須先以<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">import</span><span style="font-family: Courier New,Courier,monospace;">語句匯入</span><span style="font-weight: bold;"><span style="font-family: Courier New,Courier,monospace;">sys</span>模組（Module）</span>，命令列引數</small><small>字串陣列方式收集並指定給<span style="font-family: Courier New,Courier,monospace;">sys.argv</span>，索引</small><small>0表示為
第一個命令列引數，在Python中就是存放所執行的.py檔名，索引1則表示第二個命令列引數，依此類推。接著如下執行指令載入指令稿直譯並執行：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt; python hello.py caterpillar</span><br>Hello!caterpillar!</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<br><small><span style="font-weight: bold;">所謂模組，實際上就是個.py檔案。</span><span style="font-family: Courier New,Courier,monospace;">import</span>語句匯入模組實際上就是載入另一個.py檔案並執行其內容。例如可先撰寫一個.py檔案：<br></small><ul><li><small>some.py</small></li></ul><pre>name = 'Justin'<br>print(name)</pre><small><br>接著在另一個.py檔案中或指令互動模式中使用<span style="font-family: Courier New,Courier,monospace;">import</span>語句並執行相關程式碼：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; import some</span><br>Justin<br><span style="font-weight: bold;">&gt;&gt;&gt; print(name)</span><br>Traceback (most recent call last):<br>&nbsp; File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br>NameError: name 'name' is not defined<br><span style="font-weight: bold;">&gt;&gt;&gt; print(some.name)</span><br>Justin<br><span style="font-weight: bold;">&gt;&gt;&gt; from some import name</span><br><span style="font-weight: bold;">&gt;&gt;&gt; print(name)</span><br>Justin<br><span style="font-weight: bold;">&gt;&gt;&gt; name = 'Monica'<br>&gt;&gt;&gt; print(name)<br>Monica<br>&gt;&gt;&gt; print(some.name)<br>Justin</span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>
<br><small>在<span style="font-family: Courier New,Courier,monospace;">import some</span>時，實際上會載入some.py，之後將其編譯為<span style="font-weight: bold;">位元碼</span>形式，若有儲存檔案的權限，則通常會將位元碼儲存為<span style="font-weight: bold;">.pyc</span>檔案，位元碼是個與平台相依的指令格式，如果下次再匯入模組時，原始碼並沒有更動且.pyc存在，就會直接載入.pyc，減少了直譯的時間，從而加快了執行的速度。例如，在執行過以上的指令後，你可以發現some.pyc的存在。<br><br>使<span style="font-family: Courier New,Courier,monospace;">
用import</span>匯入模組後，就會執行程式，所以上例中，你馬上看到some.py中<span style="font-family: Courier New,Courier,monospace;">print</span>函式的結果。模組其實也是個名稱空間，模組名稱就是檔案名
稱，模組中宣告的變數或函式都是模組中的屬性，若要存取模組中的變數或函式等名稱，必須前置模組名稱，例如<span style="font-family: Courier New,Courier,monospace;">some.title</span>這樣的名稱。<br><br>可以使用<span style="font-family: Courier New,Courier,monospace;">from import語</span>句在目前模組中，建立與被匯入模組中某些變數相同的名稱，並將值指定給新建立的變數名稱。正如上面所示範的，建立出與被匯入模組中相同的變數名稱是為了方便取用變數。</small><small>如果你想要知道模組中的屬性名稱，則可以使用<span style="font-family: Courier New,Courier,monospace;">dir()</span>函式：<br></small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; dir(some)<br></span>['__builtins__', '__doc__', '__file__', '__name__', '__package__', <span style="font-weight: bold;">'name'</span>]<br><span style="font-weight: bold;">&gt;&gt;&gt;&nbsp;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>
      <small><br></small><small>在上例中，因為<span style="font-family: Courier New,Courier,monospace;">some.name</span>參考的是不可變動的字串，因此重新指定值給目前模組中的<span style="font-family: Courier New,Courier,monospace;">name，並不會影響some.name</span>。但如果是可變動物件，例如：<br>
      </small>
      <ul>
<li><small>other.py</small></li>
      </ul>
      <pre>list = [1, 2, 3]<br>print(list)</pre>
      <br>
      <small>則會有以下的結果：</small><small><br></small>
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">

<tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; import other<br>
</span>[1, 2, 3]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; from other import list<br>
&gt;&gt;&gt; list<br>
            </span>[1, 2, 3]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; list[0] = 100<br>
&gt;&gt;&gt; list<br>
            </span>[100, 2, 3]<span style="font-weight: bold;"><br>
&gt;&gt;&gt; other.list<br>
            </span>[100, 2, 3]<span style="font-weight: bold;"><br>
&gt;&gt;&gt;</span><span style="font-weight: bold;"> </span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody>
      </table>

      <small><br></small><small>除了你自定義的屬性之外，還有一些內建的屬性，這之後有機會再深入介紹。你可以一次匯入兩個以上的名稱，例如：<br></small><div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">from some import x, y</span></small><br></div><small><br>或者是將模組中的名稱全部匯入，例如：<br></small><div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">from some import *</span></small><br></div><small><br><span style="font-family: Courier New,Courier,monospace;">import
語句或from
import語句只會在第一次匯入模組時執行模組中的程式碼，重複import同</span>一個模組，並不會使得模組中的程式碼被重複執行多次，正如上例中所看到
的，你並沒有看到some.py中<span style="font-family: Courier New,Courier,monospace;">的print函式重複被執行。如果你想要重新執行模組，則可以使用</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">imp.reload()</span><span style="font-family: Courier New,Courier,monospace;">函式。例如：</span></small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; import imp<br>&gt;&gt;&gt; imp.reload(some)<br></span>Justin<br>&lt;module 'some' from 'some.py'&gt;<span style="font-weight: bold;"><br>&gt;&gt;&gt;</span><span style="font-weight: bold;">&nbsp;</span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody></table><small><br>附帶一提的是，如果要直接載入某個.py檔案來執行，則可以使用<span style="font-family: Courier New,Courier,monospace;">open()開啟.py檔案，之後read()讀取檔案，再使用exec()來執行，注意！</span></small><small style="font-family: Courier New,Courier,monospace;">這並</small><small><span style="font-family: Courier New,Courier,monospace;">非import，也非imp.reload()，</span>只是讀取整個原始碼，再整個執行過一遍。</small><small>例如：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; exec(open('some.py').read())<br></span>Justin<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody></table><small><br></small><small>每個.py檔案都是Python的模組，你可以將個別的功能撰寫在不同的模組中，在必要的時候以<span style="font-family: Courier New,Courier,monospace;">import</span>語句匯入模組，就可以取用特定模組的功能，這是撰寫Python程式的一個中心</small><small>架構</small><small>。<br><br style="font-family: Courier New,Courier,monospace;"></small><small><span style="font-family: Courier New,Courier,monospace;">先前談到，可以使用dir()查詢模組中的屬性，這邊先介紹一下</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">__name__</span><span style="font-family: Courier New,Courier,monospace;">屬性。</span>如果你使用python指令直接執行某個.py檔案，則<span style="font-family: Courier New,Courier,monospace;">__name__屬性會被設定為</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">'__main__'</span><span style="font-family: Courier New,Courier,monospace;">名稱，如果是import語句匯入模組，則__name__</span>會被設定為模組名稱。所以，</small><small>模組的作者會為了測試自己所設計的模組，而寫下這樣的程式碼：<br></small><ul><li><small>some.py</small></li></ul><pre>def doSome(text):<br>    return text + '...processed...'<br><br><span style="font-weight: bold;">def main():</span><br style="font-weight: bold;"><span style="font-weight: bold;">    fixture = 'orz'</span><br style="font-weight: bold;"><span style="font-weight: bold;">    print(doSome(fixture))</span><br>    <br style="font-weight: bold;"><span style="font-weight: bold;">if __name__ == '__main__':</span><br style="font-weight: bold;"><span style="font-weight: bold;">    main()</span></pre><small></small><br><small>如此，只有在直接執行some.py時，才會呼叫<span style="font-family: Courier New,Courier,monospace;">main()函式並執行測試，若使用import語句</span>匯入模組則不會。<br><br>在入門階段，可以先知道的是，Python會在<span style="font-weight: bold;">PYTHONPATH</span>環境變數所設定的路徑中，尋找.py或.pyc模組檔案，實際上，PYTHONPATH環境變數的內容會被讀取，成為<span style="font-weight: bold; font-family: Courier New,Courier,monospace;">sys.path</span>陣列中的字串元素，而這個字串所代表的路徑，正是模組檔案尋找的根據：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: rgb(0, 0, 0);"><small style="font-family: Courier New,Courier,monospace;"><span style="color: rgb(255, 255, 255);"><span style="font-weight: bold;">&gt;&gt;&gt; import sys<br>&gt;&gt;&gt; sys.path<br></span>['', 'C:\\Windows\\system32\\python31.zip', 'c:\\winwar<br>e\\python31\\DLLs', 'c:\\winware\\python31\\lib', 'c:\\winware\\python31\\lib\\p<br>lat-win', 'c:\\winware\\python31', 'c:\\winware\\python31\\lib\\site-packages']<br>&gt;&gt;&gt;<span style="font-weight: bold;"></span><span style="font-weight: bold;"></span></span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td></tr></tbody></table><small><br></small><br><small><br><br></small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Python/ModuleABC.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:15:42 GMT -->
</html>