<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/DeclarationScriptletExpression.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:37 GMT -->
<head>

















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>宣告、Scriptlet 與運算式元素</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Servlet/JSP Gossip: 宣告、Scriptlet 與運算式元素<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>JSP網頁會轉譯為Servlet類別，轉譯後的Servlet類別應該包括哪些類別成員、方法宣告或是哪些陳述句，在撰寫JSP時，可以使用<span style="font-weight: bold;">宣告（Declaration）元素</span>、<span style="font-weight: bold;">Scriptlet元素</span>及<span style="font-weight: bold;">運算式（Expression）元素</span>來指定。<br>
      </small><br>
      <small>首先來看到宣告元素的語法：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;%! 類別成員宣告或方法宣告 %&gt;</small><br>
      </div>
      <small><br>
在<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;%!</span><span style="font-family: Courier New,Courier,monospace;">與</span><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">%&gt;</span>之間宣告的程式碼，都將轉譯為Servlet中的類別成員或方法，之所以稱為宣告元素，是指它用來宣告類別成員與方法。舉個例子來說，如果在JSP中撰寫以下的片段：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%!</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; String name = "caterpillar";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; String password = "123456";</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; boolean checkUser(String name, String password) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return this.name.equals(name) &amp;&amp; </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.password.equals(password);&nbsp;&nbsp;&nbsp; </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br>
      </div>
      <small><br>
則轉譯後的Servlet程式碼，將會有以下的內容：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">package org.apache.jsp;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">// 略...</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">public final class index_jsp&nbsp;&nbsp;&nbsp;&nbsp; </small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
extends org.apache.jasper.runtime.HttpJspBase</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; implements org.apache.jasper.runtime.JspSourceDependent {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; String name = "caterpillar";</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; String password = "123456";</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; boolean checkUser(String name, String password) {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">return this.name.equals(name) &amp;&amp; </span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">

      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.password.equals(password);</span></small><small style="font-family: Courier New,Courier,monospace; font-weight: bold;"></small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; }</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; // 略….</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">}</small><br>
      </div>
      <small><br>
      </small><small>所以使用<span style="font-family: Courier New,Courier,monospace;">&lt;%!與%&gt;</span>宣告變數時，必須小心資料共用與執行緒安全的問題。先前曾經談過，容器預設會使用同一個Servlet實例來服務不同使用者的請求，每個請求是一個執行緒，而<span style="font-family: Courier New,Courier,monospace;">&lt;%!與%&gt;</span>間宣告的變數對應至類別變數成員，因此會有執行緒共用存取的問題。<br>
      <br>
先前曾經提過，如果你有一些初始動作，想要在JSP載入時執行，則可以重新定義<span style="font-family: Courier New,Courier,monospace;">jspInit()</span>方法，或是在<span style="font-family: Courier New,Courier,monospace;">jspDestroy()</span>中定義結尾動作。定義<span style="font-family: Courier New,Courier,monospace;">jspInit()</span>與<span style="font-family: Courier New,Courier,monospace;">jspDestroy()</span>的方法，就是在<span style="font-family: Courier New,Courier,monospace;">&lt;%!與%&gt;</span>之間進行，如此轉譯後的Servlet原始碼，就會有相對應的方法片段出現。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%!</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public void jspInit() {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 初始化動作</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; public void jspDestroy() {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 結尾動作</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
再來談到Scriptlet元素，先看看其語法：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;% Java陳述句 %&gt;</span></small><br>
      </div>
      <small><br>
注意到<span style="font-family: Courier New,Courier,monospace;">&lt;%後沒有驚嘆號（!）</span>。在宣告元素中可以撰寫Java陳述句，就如同你在Java的方法中撰寫陳述句一樣。事實上，<span style="font-family: Courier New,Courier,monospace;">&lt;%與%&gt;</span>之間所包括的內容，將被轉譯為Servlet原始碼<span style="font-family: Courier New,Courier,monospace;">_jspService()</span>方法中的內容。舉個例子來說：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; String name = request.getParameter("name");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; String password = request.getParameter("password");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; if(checkUser(name, password)) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;h1&gt;登入成功&lt;/h1&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; else {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;h1&gt;登入失敗&lt;/h1&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; }</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br>
      </div>
      <small><br>
這段JSP中的Scriptlet，在轉譯為Servlet後，會有以下對應的原始碼：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">package org.apache.jsp;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">// 略...</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">public final class login_jsp </small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; extends org.apache.jasper.runtime.HttpJspBase</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; implements org.apache.jasper.runtime.JspSourceDependent {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; // 略...</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; public void _jspService(HttpServletRequest request, </small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
HttpServletResponse response)</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throws java.io.IOException, ServletException {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; // 略…</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; String name = request.getParameter("name");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; String password = request.getParameter("password");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; if(checkUser(name, password)) {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("\n");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;h1&gt;登入成功&lt;/h1&gt;\n");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; }</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; else {</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("\n");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; out.write("&nbsp;&nbsp;&nbsp; &lt;h1&gt;登入失敗&lt;/h1&gt;\n");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; }</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; // 略...</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp; }</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">}</small><br>
      </div>
      <small><br>
直接JSP中撰寫的HTML，都會變成<span style="font-family: Courier New,Courier,monospace;">out</span>物件所輸出的內容。Scriptlet出現的順序，也就是在轉譯為Servlet後，陳述句出現在<span style="font-family: Courier New,Courier,monospace;">_jspService()</span>中的順序。<br>
      <br>
再來談到運算式元素，其語法如下：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%= Java運算式 %&gt;</span></small><br>
      </div>
      <small><br>
你可以在運算式元素中撰寫Java運算式，運算式的運算結果將直接輸出為網頁的一部份。例如之前看過的範例中，有使用到一段運算式元素：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">現在時間: &lt;%= new Date() %&gt;</span></small><br>
      </div>
      <small><br>
注意！運算式元素中不用加上分號（<span style="font-family: Courier New,Courier,monospace;">;</span>）。這個運算式元素在轉譯為Servlet之後，會在<span style="font-family: Courier New,Courier,monospace;">_jspService()</span>中產生以下的陳述句：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">out.print(new Date());</span></small><br>
      </div>
      <small><br>
簡單地說，運算式元素中的運算式，會直接轉譯為out物件輸出時的指定內容（這也是為什麼運算式元素中不用加上分號的原因）。<br>
      <br>
下面這個範例綜合了以上的說明，實作了一個簡單的登入程式，當中使用了宣告元素、Scriptlet元素與運算式元素。<br>
      </small>
      <pre>&lt;%@page contentType="text/html" pageEncoding="UTF-8"%&gt;<br>&lt;%!<br>    String name = "caterpillar";<br>    String password = "123456";<br><br>    boolean checkUser(String name, String password) {<br>        return this.name.equals(name) &amp;&amp;<br>                 this.password.equals(password);<br>    }<br>%&gt;<br>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"<br>   "http://www.w3.org/TR/html4/loose.dtd"&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv="Content-Type" <br>               content="text/html; charset=UTF-8"&gt;<br>        &lt;title&gt;登入頁面&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br>&lt;%<br>    String name = request.getParameter("name");<br>    String password = request.getParameter("password");<br>    if(checkUser(name, password)) {<br>%&gt;<br>    &lt;h1&gt;&lt;%= name %&gt; 登入成功&lt;/h1&gt;<br>&lt;%<br>    } else {<br>%&gt;<br>    &lt;h1&gt;登入失敗&lt;/h1&gt;<br>&lt;%<br>    }<br>%&gt;<br>    &lt;/body&gt;<br>&lt;/html&gt;  <br></pre>
      <small><br>
&nbsp;如果請求參數驗證無誤就會顯示使用者名稱及登入成功的字樣，否則顯示登入失敗。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">&lt;%與%&gt;</span>用來在JSP中會用來作為一些元素的開頭與結尾符號，如果你要在JSP網頁中輸出<span style="font-family: Courier New,Courier,monospace;">&lt;%符號或%&gt;</span>符號，不能直接寫下<span style="font-family: Courier New,Courier,monospace;">&lt;%或%&gt;</span>，以免轉譯時被誤為是某個元素的起始或結尾符號。例如若JSP網頁中包括下面這段，就會發生錯誤：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; out.println("JSP中Java語法結束符號%&gt;");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br>
      </div>
      <br>
      <small>如果你要在JSP中輸出<span style="font-family: Courier New,Courier,monospace;">&lt;%或%&gt;</span>符號，要將角括號置換為替代字元。例如想輸出<span style="font-family: Courier New,Courier,monospace;">&lt;%時可使用<span style="font-weight: bold;">&amp;lt;%</span></span>；而輸出<span style="font-family: Courier New,Courier,monospace;">%&gt;</span>時，可以使用<span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&amp;gt;</span>或使用<span style="font-weight: bold;">%\&gt;</span></span>。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&lt;%</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; out.println("&amp;lt;%與%\&gt;被用來作為JSP中Java語法的部份");</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">%&gt;</span></small><br>
      </div>
<br>
      <small>如果您想禁用JSP上的Scriptlet，則可以在web.xml中設定：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;web-app …&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; …</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &lt;jsp-config&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;jsp-property-group&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;scripting-invalid&gt;true&lt;/scripting-invalid&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/jsp-property-group&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;&nbsp;&nbsp; &lt;/jsp-config&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;/web-app&gt;</small><br>
      </div>
      <br>
      <small>會想禁用Scriptlet的情況，是在你不想讓Java程式碼與HTML標記混合的時候，一個網頁經由適當的規畫，切割商務邏輯與呈現邏輯的話，JSP網頁可以藉由標準標籤、EL或JSTL自訂標籤等，徹底消除網頁上的Scriptlet。</small><br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/DeclarationScriptletExpression.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:37 GMT -->
</html>