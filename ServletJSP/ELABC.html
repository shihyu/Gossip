<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/ELABC.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:54 GMT -->
<head>


















  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type"><title>簡介 EL</title></head><body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Servlet/JSP Gossip: 簡介 EL<br>
</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;">
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br>      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
</td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>JSP中若有用Scriptlet撰寫Java程式碼，以進行屬性、請求參數、標頭與Cookie等訊息的取得，或是一些簡單的運算或判斷，可以試著使用EL來取代，以減少JSP頁面上Scriptlet的使用。</small><br>
      <br><small>
直接來改寫</small> <small><a href="HandleError.html">錯誤處理</a> 中有使用到的add.jsp範例頁面，當時的JSP頁面中，撰寫了以下的Scriptlet：</small><br>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&lt;%</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp;&nbsp;&nbsp; String a = request.getParameter("a");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp;&nbsp;&nbsp; String b = request.getParameter("b");</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp;&nbsp;&nbsp; out.println("a + b = " + </small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(Integer.parseInt(a) + Integer.parseInt(b))</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">
%&gt;</small><br>
      </div>
      <br>
      <small>如果使用EL，則可以優雅地用一行程式碼來改寫，甚至加強這段Scriptlet。例如：<br>
      </small>
      <pre>&lt;%@page contentType="text/html" pageEncoding="UTF-8"<br>         errorPage="error.jsp"%&gt;<br>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"<br>   "http://www.w3.org/TR/html4/loose.dtd"&gt;<br>&lt;html&gt;<br>    &lt;head&gt;<br>        &lt;meta http-equiv="Content-Type" <br>                content="text/html; charset=UTF-8"&gt;<br>        &lt;title&gt;加法網頁&lt;/title&gt;<br>    &lt;/head&gt;<br>    &lt;body&gt;<br><span style="font-weight: bold;">        ${param.a} + ${param.b} = ${param.a + param.b}</span><br>    &lt;/body&gt;<br>&lt;/html&gt; <br></pre>

      <br>
      <small>在這個簡單的例子中可以看到幾個EL元素。EL是使用<span style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">${</span>與<span style="font-weight: bold;">}</span></span>來包括所要進行處理的運算式，可使用<span style="font-weight: bold;">點運算子（.）</span>指定要存取的屬性，使用<span style="font-weight: bold;">加號（+）</span>運算子進行加法運算。<span style="font-family: Courier New,Courier,monospace; font-weight: bold;">param</span>是<span style="font-weight: bold;">EL隱含物件</span>之一，表示使用者的請求參數，<span style="font-family: Courier New,Courier,monospace;">param.a</span>表示取得使用者所發出的請求參數a的值。<br>
      <br>
EL優雅地處理了<span style="font-family: Courier New,Courier,monospace;">null</span>值的情況，對於<span style="font-family: Courier New,Courier,monospace;">null</span>值直接以空字串加以顯示，而不是直接顯示<span style="font-family: Courier New,Courier,monospace;">null</span>值，在進行運算時，也不會因此發生錯誤而丟出例外。<br>
      <br>
EL的點運算子還可以連續存取物件，就如同在Java程式碼一般。例如原先你需要這麼撰寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">方法：&lt;%= ((HttpServletRequest) pageContext.getRequest()).getMethod() %&gt;&lt;br&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">參數：&lt;%= ((HttpServletRequest) pageContext.getRequest()).getQueryString() %&gt;</small><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;br&gt;</small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-weight: bold; font-family: Courier New,Courier,monospace;">IP：&lt;%= ((HttpServletRequest) pageContext.getRequest()).getRemoteAddr() %&gt;</small><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">&lt;br&gt;</small>
      </div>
      <small><br>
若是使用EL，則可以這麼撰寫：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">方法：${pageContext.request.method}&lt;br&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">參數：${pageContext.request.queryString}&lt;br&gt;</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">
      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">IP：${pageContext.request.remoteAddr}&lt;br&gt;</span></small><br style="font-weight: bold;">
      </div>
      <small><br>
      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">pageContext</span>也是EL的隱含物件之一，透過點運算子之後接上<span style="font-family: Courier New,Courier,monospace;">xxx</span>名稱，表示呼叫<span style="font-family: Courier New,Courier,monospace;">getXxx()</span>方法，如果必須轉換型態，EL也會自行處理，而不用像撰寫JSP運算式元素時，必須自行作轉換型態的動作。<br>
      <br>
      <span style="font-family: Courier New,Courier,monospace;">你可以使用page指示元素的isELIgnored屬性</span>（預設是<span style="font-family: Courier New,Courier,monospace;">false</span>），來設定JSP網頁是否使用EL。會這麼作的原因可能在於，你的網頁中已含有與EL類似的<span style="font-family: Courier New,Courier,monospace;">${}</span>語法功能存在，例如使用了某個樣版（Template）框架之類。<br>
      <br>
你也可以在web.xml中設定<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;標籤為true</span>來決定不使用EL。例如：<br>
      </small>
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;web-app …&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; …</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;jsp-config&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;jsp-property-group&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;el-ignored&gt;true&lt;/el-ignored&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/jsp-property-group&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&nbsp;&nbsp;&nbsp; &lt;/jsp-config&gt;</small><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">
      <small style="font-family: Courier New,Courier,monospace; font-weight: bold;">&lt;/web-app&gt;</small><br>
      </div>
      <small><br>
web.xml中的<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;是用來預設符合&lt;url-pattern&gt;</span>的JSP網頁是否使用EL。<br>
      <br>
如果</small><small>
web.xml中的<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;與</span></small><small><span style="font-family: Courier New,Courier,monospace;">page指令元素的isELIgnored</span>設定都</small><small><span style="font-family: Courier New,Courier,monospace;">沒有設定，如果</span>web.xml<span style="font-family: Courier New,Courier,monospace;">是</span>2.3<span style="font-family: Courier New,Courier,monospace;">或以下的版本，不會執行EL，如果</span>是2.4或以上的版本，則會執行EL。</small><br>
      <small><br>
如果設定</small><small>web.xml中的<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;為false，但不設定</span></small><small><span style="font-family: Courier New,Courier,monospace;">page指令元素的isELIgnored，則會執行</span>EL<span style="font-family: Courier New,Courier,monospace;">，</span></small><small>如果設定</small><small>web.xml中的<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;為true，但不設定</span></small><small><span style="font-family: Courier New,Courier,monospace;">page指令元素的isELIgnored，</span></small><small><span style="font-family: Courier New,Courier,monospace;">則不會執行</span>EL<span style="font-family: Courier New,Courier,monospace;">。<br>
      <br>
      </span></small><small>如果JSP網頁使用<span style="font-family: Courier New,Courier,monospace;">page指令元素的isELIgnored</span>設定是否支援EL，則以<span style="font-family: Courier New,Courier,monospace;">page</span>指令元素的設定為主，不管</small><small>web.xml中的<span style="font-family: Courier New,Courier,monospace;">&lt;el-ignored&gt;的設定為何</span></small><small>。<br>
      </small><br>
<br>
</td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/ServletJSP/ELABC.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:17:54 GMT -->
</html>